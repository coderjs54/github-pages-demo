var A=Object.defineProperty;var D=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var S=(e,a,s)=>a in e?A(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,V=(e,a)=>{for(var s in a||(a={}))B.call(a,s)&&S(e,s,a[s]);if(D)for(var s of D(a))T.call(a,s)&&S(e,s,a[s]);return e};import{d as O,r as z,i as q,S as M,w as U,o as $,E as u,m as C,q as I,y as o,G as r,N as R,F,A as H,z as _,t as L,x as K,I as N,C as d}from"../vendors/element-plus-6f9977bb.js";import{r as P,U as E,_ as W,b as j,d as G}from"./index.1a2bb961.js";import{_ as J}from"./tip-1b2ff95a.js";function Q(e){return P.post(E.INVOICE.queryInvoice,e)}function X(e){return P.post(E.INVOICE.checkInvoice,e)}const Y=O({setup(){const e=j(),a=G(),s=i=>{n.tableData=i.map(p=>{const{INVOICEDATE:l,INVOICECODE:f,INVOICEAMT:c,INVOICENO:b,VerifyStatus:t,ApproveStatus:m,VerifyDate:g,SODATE:k,ProviderName:w}=p;return{invoiceNumber:b,invoiceSerialNumber:f,invoiceMoney:c,verifyStatus:t?"\u5DF2\u6838\u9500":"\u5F85\u6838\u9500",checkStatus:m?"\u5DF2\u5BA1\u6279":"\u5F85\u5BA1\u6279",receiveTime:l.substr(0,10),accountTime:g.substr(0,10),invoiceCreateTime:k.substr(0,10),provider:w}})},v=()=>{n.loading=!0;const{pageSize:i,currentPage:p}=N(n.pagination),{invoiceNumber:l}=N(n.searchParam);Q({BeginPostingDate:"",EndPostingDate:"",InvoiceNo:l,DeliverOrderId:"",HospitalCode:"",ProviderName:"",VerifyStatus:"1",ApproveStatus:"2",PageNo:p,RecordPerPage:i}).then(c=>{n.pagination.total=c.TotalRecordCount,s(c.invoices)}).finally(()=>{n.loading=!1})},h=i=>{i&&(n.pagination.currentPage=1),v()},n=z({loading:!1,searchParam:{invoiceNumber:""},pagination:{currentPage:1,total:0,pageSize:30},headersConfig:[{label:"\u53D1\u7968\u53F7",prop:"invoiceNumber"},{label:"\u53D1\u7968\u7F16\u53F7",prop:"invoiceSerialNumber"},{label:"\u53D1\u7968\u91D1\u989D",prop:"invoiceMoney"},{label:"\u4F9B\u5E94\u5546",prop:"provider"},{label:"\u5F00\u7968\u65F6\u95F4",prop:"invoiceCreateTime"},{label:"\u6838\u9500\u72B6\u6001",prop:"verifyStatus"},{label:"\u5BA1\u6279\u72B6\u6001",prop:"checkStatus"},{label:"\u6570\u636E\u63A5\u6536\u65F6\u95F4",prop:"receiveTime"},{label:"\u8D26\u52A1\u65E5\u671F",prop:"accountTime"}],tableData:[],dialogVerifyInvoice:!1,verifyInvoiceData:{invoiceId:""}}),y={calcHeaderWidth:q("calcHeaderMinWidth"),handlePaginationChange(){h(!1)},handleSearch(){h(!0)},handleCheck(i){n.dialogVerifyInvoice=!0,n.verifyInvoiceData.invoiceId=i.invoiceNumber},confirmVerifyInvoice(){const i={InvoiceNo:n.verifyInvoiceData.invoiceId};X(i).then(()=>{M.success("\u64CD\u4F5C\u6210\u529F"),n.dialogVerifyInvoice=!1}).finally(()=>{v()})}};return U(()=>a.getters.settings,()=>{n.headersConfig=a.getters.settings[e.name]||n.headersConfig}),$(()=>{v()}),V({state:n},y)}}),Z=d("\u67E5\u8BE2"),x=d("\u5BA1\u6279"),ee=o("div",{class:"title"},"\u63D0\u793A",-1),ae={class:"tip-body"},te=o("img",{src:J,alt:""},null,-1),oe=d("\u786E\u8BA4\u8981\u5BA1\u6838\u53D1\u7968\u53F7\u4E3A"),ne={class:"item-name"},ie=d("\u7684\u53D1\u7968\u5417?"),se={class:"right-footer"},re=d("\u53D6\u6D88"),ue=d("\u786E\u5B9A");function le(e,a,s,v,h,n){const y=u("el-input"),i=u("el-button"),p=u("styled-search"),l=u("el-table-column"),f=u("styled-table"),c=u("styled-pagination"),b=u("el-dialog");return C(),I(F,null,[o(p,{"hide-search-more":""},{"styled-search-left":r(()=>[o(y,{modelValue:e.state.searchParam.invoiceNumber,"onUpdate:modelValue":a[1]||(a[1]=t=>e.state.searchParam.invoiceNumber=t),placeholder:"\u8BF7\u8F93\u5165\u53D1\u7968\u53F7",clearable:"",onKeydown:R(e.handleSearch,["enter"]),onClear:e.handleSearch},null,8,["modelValue","onKeydown","onClear"]),o(i,{type:"primary",class:"search",onClick:e.handleSearch},{default:r(()=>[Z]),_:1},8,["onClick"])]),_:1}),o(f,{data:e.state.tableData},{"table-columns":r(()=>[(C(!0),I(F,null,H(e.state.headersConfig,(t,m)=>(C(),I(l,{"show-overflow-tooltip":"",key:m,prop:t.prop,label:t.label,"min-width":e.calcHeaderWidth(t,m)},{header:r(g=>[o("span",null,_(g.column.label),1)]),default:r(g=>[o("span",null,_(g.row[t.prop]),1)]),_:2},1032,["prop","label","min-width"]))),128)),o(l,{label:"\u64CD\u4F5C","min-width":100,fixed:"right"},{default:r(t=>[L(o(i,{class:"modify",type:"text",onClick:m=>e.handleCheck(t.row)},{default:r(()=>[x]),_:2},1032,["onClick"]),[[K,t.row.checkStatus==="\u5F85\u5BA1\u6279"]])]),_:1})]),_:1},8,["data"]),o(c,{total:e.state.pagination.total,"current-page":e.state.pagination.currentPage,"onUpdate:current-page":a[2]||(a[2]=t=>e.state.pagination.currentPage=t),"page-size":e.state.pagination.pageSize,"onUpdate:page-size":a[3]||(a[3]=t=>e.state.pagination.pageSize=t),onPaginationChange:e.handlePaginationChange},null,8,["total","current-page","page-size","onPaginationChange"]),o(b,{width:"466px",modelValue:e.state.dialogVerifyInvoice,"onUpdate:modelValue":a[5]||(a[5]=t=>e.state.dialogVerifyInvoice=t)},{title:r(()=>[ee]),footer:r(()=>[o("div",se,[o(i,{onClick:a[4]||(a[4]=t=>e.state.dialogVerifyInvoice=!1),class:"cancel"},{default:r(()=>[re]),_:1}),o(i,{type:"primary",onClick:e.confirmVerifyInvoice,class:"confirm"},{default:r(()=>[ue]),_:1},8,["onClick"])])]),default:r(()=>[o("div",ae,[te,o("span",null,[oe,o("span",ne,_(e.state.verifyInvoiceData.invoiceId),1),ie])])]),_:1},8,["modelValue"])],64)}var ge=W(Y,[["render",le]]);export{ge as default};
