System.register(["./index-legacy.acc39ef9.js","../vendors/element-plus-legacy-e48d1ae3.js","./concurrent-legacy-5288d5cc.js","./unique-legacy-208d2722.js","./tip-legacy-d18ff986.js"],(function(e){"use strict";var a,l,t,r,o,n,d,s,i,c,u,p,D,g,b,h,f,O,y,m,C,T,A,N,M;return{setters:[function(e){a=e.r,l=e.U,t=e._,r=e.u,o=e.b,n=e.O},function(e){d=e.d,s=e.i,i=e.r,c=e.I,u=e.O,p=e.E,D=e.m,g=e.q,b=e.y,h=e.G,f=e.F,O=e.A,y=e.z,m=e.K,C=e.Y,T=e.C},function(e){A=e.C},function(e){N=e.u},function(e){M=e._}],execute:function(){function E(e){return a.post(l.DELIVERY.addMiddleTableDelivery,e)}const k=d({setup(){const e=r(),a=o(),l=s("showPagination",!1),t="/orderlist",d=i({showPagination:l,tableData:[],headersConfig:[{label:"单据号",prop:"DJH"},{label:"审核日期",prop:"SHRQ"},{label:"资产代码",prop:"ZCDM"},{label:"资产名称",prop:"ZCMC"},{label:"规格型号",prop:"GGXH"},{label:"单位",prop:"UNIT"},{label:"数量",prop:"AMOUNT"},{label:"申请部门名称",prop:"SQBMMC"},{label:"供货单位名称",prop:"GHDWMC"},{label:"记录生成日期",prop:"JLSCRQ"},{label:"制单人名称",prop:"ZDRMC"},{label:"备注",prop:"Remark"},{label:"买A换B",prop:"buy_a_to_b"}],orderaddDialog:!1,orderadding:!1}),p={calcHeaderWidth:s("calcHeaderMinWidth"),handleOrderAdd(){d.orderaddDialog=!0},confirmOrderAdd(){const a=c(d.tableData);let l,r=[];const o=new Date;!function(e,a){const l=new A({concurrent:5,total:e.length,requestFunc:E});for(let t=0;t<e.length;t++)l.request(e[t],a)}(a.map(((e,a)=>{const{UNIT:t,AMOUNT:d,DJH:s,ZCDM:i,ZCMC:c,PONO:u,PODETNO:p}=e;return l=N.uniqueSOID(o)+a,r.push(l),{INVDETID:N.uniqueINVDETID(o)+a,SOID:l,SOGRPNO:"1",SONO:s,SODATE:n(),PONO:u,PODETNO:p,DITEMCODE:i,DITEMNAME:c,DPACKUNIT:t,DQTY:d,DTAXPRC:"15000",TAXAMT:"1500",TAX:"15",LOTNO:N.uniqueLOTNO(o)+a,ENDDATE:"2022-09-30",TAXRATE:"0.2"}})),(a=>{d.orderaddDialog=!1,a.every((e=>e.success))&&(C({title:"操作成功",dangerouslyUseHTMLString:!0,message:"此次系统自动生成的交货单id为：<strong style='color: darkorange;'>"+r.join(",")+"</strong>，您可以在验收列表中查看。",type:"success",duration:0}),e.push(t))}))},handleGoBack(){e.go(-1)}};return u((()=>{let l=a.params.tableData;return l?(l=JSON.parse(l),l.length?void(d.tableData=l):e.push(t)):e.push(t)})),{state:d,...p}}}),I=T("确定交货"),_=T("返回选择"),w=b("div",{class:"title"},"提示",-1),S={class:"tip-body"},P=b("img",{src:M,alt:""},null,-1),v=T("确认要对选中的"),H={class:"item-name"},R=T("个订单进行交货吗?"),U={class:"right-footer"},q=T("取消"),G=T("确定");e("default",t(k,[["render",function(e,a,l,t,r,o){const n=p("el-button"),d=p("styled-search"),s=p("el-table-column"),i=p("styled-table"),c=p("styled-pagination"),u=p("el-dialog");return D(),g(f,null,[b(d,{"hide-search-more":""},{"styled-search-right":h((()=>[b(n,{type:"primary",class:"search",onClick:e.handleOrderAdd},{default:h((()=>[I])),_:1},8,["onClick"]),b(n,{type:"primary",plain:"",onClick:e.handleGoBack},{default:h((()=>[_])),_:1},8,["onClick"])])),_:1}),b(i,{data:e.state.tableData},{"table-columns":h((()=>[(D(!0),g(f,null,O(e.state.headersConfig,((a,l)=>(D(),g(s,{"show-overflow-tooltip":"",key:l,prop:a.prop,label:a.label,"min-width":e.calcHeaderWidth(a,l)},{header:h((e=>[b("span",null,y(e.column.label),1)])),default:h((e=>[b("span",null,y(e.row[a.prop]),1)])),_:2},1032,["prop","label","min-width"])))),128))])),_:1},8,["data"]),e.state.showPagination?(D(),g(c,{key:0})):m("",!0),b(u,{width:"466px",modelValue:e.state.orderaddDialog,"onUpdate:modelValue":a[2]||(a[2]=a=>e.state.orderaddDialog=a)},{title:h((()=>[w])),footer:h((()=>[b("div",U,[b(n,{onClick:a[1]||(a[1]=a=>e.state.orderaddDialog=!1),class:"cancel"},{default:h((()=>[q])),_:1}),b(n,{type:"primary",loading:e.state.orderadding,onClick:e.confirmOrderAdd,class:"confirm"},{default:h((()=>[G])),_:1},8,["loading","onClick"])])])),default:h((()=>[b("div",S,[P,b("span",null,[v,b("span",H,y(e.state.tableData.length),1),R])])])),_:1},8,["modelValue"])],64)}]]))}}}));
