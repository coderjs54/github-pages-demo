var J=Object.defineProperty;var K=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var O=(a,l,_)=>l in a?J(a,l,{enumerable:!0,configurable:!0,writable:!0,value:_}):a[l]=_,U=(a,l)=>{for(var _ in l||(l={}))X.call(l,_)&&O(a,_,l[_]);if(K)for(var _ of K(l))Y.call(l,_)&&O(a,_,l[_]);return a};import{d as Z,a as L,r as x,c as q,i as aa,I as F,S as C,o as ea,w as P,E as y,m,q as p,y as e,G as o,N as Q,F as T,A as k,z as c,K as $,C as g}from"../vendors/element-plus-6f9977bb.js";import{r as A,U as N,_ as ta,d as ia,S as la}from"./index.1a2bb961.js";import{r as oa}from"./departmentmanage-17d266d9.js";import{_ as na}from"./tip-1b2ff95a.js";function ua(a){return A.post(N.SUIT.querySuit,a)}function sa(a){return A.post(N.SUIT.addSuit,a)}function ra(a){return A.post(N.SUIT.modifySuit,a)}function da(a){return A.post(N.SUIT.modifySuitName,a)}function ma(a){return A.post(N.SUIT.deleteSuit,a)}function j(a){return A.post(N.MATERIAL.queryMaterial,a)}const pa=Z({setup(){const a=ia(),l=()=>{i.loading=!0;const{suitName:u,department:s}=F(i.searchParams);ua({SuitName:u,MaterialKeyword:""}).then(f=>{R(f.suits)}).finally(()=>{i.loading=!1})},_=u=>{u&&(i.pagination.currentPage=1),i.materialLoading=!0;const{searchWord:s}=F(i.addSuitData.mainMaterialSearchParams),{pageSize:r,currentPage:f}=F(i.pagination);j({searchWord:s,DepartmentId:"",MaterialType:"",BrandId:"",InstrumentId:"",NeedPaging:!0,PageNo:f,RecordPerPage:r,CheckHChemical:!1,IsHChemical:!1}).then(b=>{i.pagination.total=b.TotalRecordCount,i.materialList=b.materials.map(M=>{const{hospital_code:v,name:S,short_name:w,brand_id:B,minimumUnit:E}=M;return{hospital_code:v,unit:E,material_name:S,brand:B,shortname:w}})}).finally(()=>{i.materialLoading=!1})},R=u=>{i.tableData=u.map(s=>{const{DepartmentId:r,SuitName:f,SuitItems:h}=s,{GiftName:b,MaterialName:M,GiftUnit:v,MaterialUnit:S,ModifyTime:w}=h[0];return{server:s,suit_name:f,organization_name:i.departmentMap.get(r),material_name:M,update_time:w.substr(0,10)}})},G={singleAddFormRef:L(null),singleModifyFormRef:L(null),addGiftFormRef:L(null)},z={labelWidth:"100px",mainMaterialHeadersConfig:[{label:"\u9662\u5185\u7801",prop:"hospital_code"},{label:"\u7269\u6599\u540D\u79F0",prop:"material_name"},{label:"\u54C1\u724C",prop:"brand"},{label:"\u7B80\u79F0",prop:"shortname"},{label:"\u5355\u4F4D",prop:"unit"}],giftHeadersConfig:[{label:"\u8D60\u54C1\u9662\u5185\u7801",prop:"gift_hospital_code"},{label:"\u8D60\u54C1\u540D\u79F0",prop:"gift_name"},{label:"\u6570\u91CF",prop:"number"},{label:"\u5355\u4F4D",prop:"unit"}],addGiftFormRules:{gift_hospital_code:[{required:!1,message:"\u8BF7\u8F93\u5165\u8D60\u54C1\u9662\u5185\u7801",trigger:"blur"}],gift_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D60\u54C1\u540D\u79F0",trigger:"blur"}],number:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D60\u54C1\u6570\u91CF",trigger:"blur"}],unit:[{required:!0,message:"\u8BF7\u9009\u62E9\u8D60\u54C1\u5355\u4F4D",trigger:"change"}]}},i=x({loading:!1,materialLoading:!1,searchParams:{department:"",suitName:""},pagination:{currentPage:1,total:0,pageSize:30},departmentTreeData:[],addDialog:!1,chooseMainMaterialDialog:!1,modifyDialog:!1,singleDeleteDialog:!1,batchDeleteDialog:!1,materialList:[],giftForm:{gift_hospital_code:"",gift_name:"",number:1,unit:""},addGiftDialog:!1,addSuitData:{suitSearchParams:{department:"",suitName:""},mainMaterialSearchParams:{searchWord:""},mainMaterialTableData:[],giftTableData:[]},modifySuitData:{suitSearchParams:{department:"",suitName:""},mainMaterialSearchParams:{searchWord:""},mainMaterialTableData:[],giftTableData:[]},modifyData:{name:"",department:""},singleDeleteData:{departmentId:"",suitName:""},tableData:[],headersConfig:[{label:"\u5957\u88C5\u540D\u79F0",prop:"suit_name"},{label:"\u4E3B\u7269\u6599\u540D\u79F0",prop:"material_name"},{label:"\u7EC4\u7EC7\u540D\u79F0",prop:"organization_name"},{label:"\u66F4\u65B0\u65F6\u95F4",prop:"update_time"}],mainMaterialMultipleSelection:[],brandIdMap:q(()=>a.getters.brandIdMap),MinUnitTypeOptions:q(()=>a.getters.MinUnitTypeOptions),MinUnitTypeMap:q(()=>a.getters.MinUnitTypeMap),departmentMap:new Map}),D={calcHeaderMinWidth:aa("calcHeaderMinWidth"),handleSearch:l,handlePaginationChange(){_(!1)},handleAddSuit(){i.addDialog=!0},confirmAddSuit(){const{suitSearchParams:u,mainMaterialTableData:s,giftTableData:r}=F(i.addSuitData),{department:f,suitName:h}=u;if(!Array.isArray(f))return C.error("\u8BF7\u9009\u62E9\u5957\u88C5\u6240\u5C5E\u90E8\u95E8");if(!h)return C.error("\u8BF7\u8F93\u5165\u5957\u88C5\u540D\u79F0");if(s.length!==1)return C.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u4E3B\u7269\u6599");if(r.length===0)return C.error("\u8BF7\u6DFB\u52A0\u81F3\u5C11\u4E00\u4E2A\u8D60\u54C1\u4FE1\u606F");const{hospital_code:b,material_name:M,brand:v,shortname:S,unit:w}=s[0],B={SuitName:h,DepartmentId:f.at(-1),MaterialHospitalCode:b,MaterialBuyAToB:"",MaterialCloneNumber:"",MainMaterialAmount:1,MainMaterialUnit:w,Gifts:r.map(E=>{const{gift_hospital_code:t,gift_name:d,number:n,unit:V}=E;return{GiftHospitalCode:t,GiftBuyAToB:"",GiftCloneNumber:"",GiftName:d,amount:n,unit:V}})};sa(B).then(E=>{C.success("\u64CD\u4F5C\u6210\u529F"),l()}).finally(()=>{i.addDialog=!1})},handleModify(u){i.modifyDialog=!0;const{server:s}=F(u),{DepartmentId:r,SuitName:f,SuitItems:h}=s;i.modifyData={name:f,department:r};const{MaterialHospitalId:b}=h[0];j({searchWord:b}).then(v=>{const{hospital_code:S,name:w,brand_id:B,short_name:E,minimumUnit:t}=v.materials[0];i.modifySuitData={suitSearchParams:{department:r,suitName:f},mainMaterialSearchParams:{searchWord:""},mainMaterialTableData:[{hospital_code:S,material_name:w,brand:B,shortname:E,unit:t}],giftTableData:h.map((d,n)=>{const{GiftName:V,GiftAmount:I,GiftMaterialId:W,GiftUnit:H}=d;return{id:n,gift_hospital_code:W,gift_name:V,number:I,unit:H}})}})},confirmModifySuit(){const{suitSearchParams:u,mainMaterialTableData:s,giftTableData:r}=F(i.modifySuitData),{department:f,suitName:h}=u;if(!f)return C.error("\u8BF7\u9009\u62E9\u5957\u88C5\u6240\u5C5E\u90E8\u95E8");if(!h)return C.error("\u8BF7\u8F93\u5165\u5957\u88C5\u540D\u79F0");const{name:b,department:M}=F(i.modifyData);let v;if(Array.isArray(f)?v=f.at(-1):v=f,s.length!==1)return C.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u4E3B\u7269\u6599");if(r.length===0)return C.error("\u8BF7\u6DFB\u52A0\u81F3\u5C11\u4E00\u4E2A\u8D60\u54C1\u4FE1\u606F");const{hospital_code:S,material_name:w,brand:B,shortname:E,unit:t}=s[0],d={SuitName:b,DepartmentId:M,MainMaterialId:S,MaterialBuyAToB:"",MaterialCloneNumber:"",MainMaterialAmount:1,MainMaterialUnit:t,Gifts:r.map(n=>{const{gift_hospital_code:V,gift_name:I,number:W,unit:H}=n;return{GiftHospitalCode:V,GiftBuyAToB:"",GiftCloneNumber:"",GiftName:I,amount:W,unit:H}})};ra(d).then(()=>da({OldSuitName:b,OldDepartmentId:M,NewSuitName:h,NewDepartmentId:v}).then(()=>{C.success("\u64CD\u4F5C\u6210\u529F"),l()})).finally(()=>{i.modifyDialog=!1})},handleSingleDelete(u){i.singleDeleteDialog=!0;const{SuitName:s,DepartmentId:r}=F(u.server);i.singleDeleteData={departmentId:r,suitName:s}},confirmSingleDelete(){const{departmentId:u,suitName:s}=F(i.singleDeleteData);ma({SuitName:s,DepartmentId:u}).then(()=>{C.success("\u64CD\u4F5C\u6210\u529F"),l()}).finally(()=>{i.singleDeleteDialog=!1})},handleChooseMainMaterial(){i.chooseMainMaterialDialog=!0,_(!0)},handleMainMaterialMultipleChange(u){i.mainMaterialMultipleSelection=u},handleConfirmAddMainMaterial(){const u=i.mainMaterialMultipleSelection.length;if(u===0)return C.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u4E3B\u7269\u6599");if(u>1)return C.error("\u53EA\u80FD\u9009\u62E9\u4E00\u4E2A\u4E3B\u7269\u6599");i.addDialog?i.addSuitData.mainMaterialTableData=F(i.mainMaterialMultipleSelection):i.modifyDialog&&(i.modifySuitData.mainMaterialTableData=F(i.mainMaterialMultipleSelection)),i.chooseMainMaterialDialog=!1},handleAddGift(){i.addGiftDialog=!0},confirmAddGift(){const{gift_hospital_code:u,gift_name:s,number:r,unit:f}=F(i.giftForm);if(i.addDialog){const h=i.addSuitData.giftTableData.length;i.addSuitData.giftTableData.push({id:h,gift_hospital_code:u,gift_name:s,number:r,unit:f})}else if(i.modifyDialog){const h=i.modifySuitData.giftTableData.length;i.modifySuitData.giftTableData.push({id:h,gift_hospital_code:u,gift_name:s,number:r,unit:f})}i.addGiftDialog=!1},handleDeleteGift(u){if(i.addDialog){const s=i.addSuitData.giftTableData.findIndex(r=>r.id===u.id);i.addSuitData.giftTableData.splice(s,1)}else if(i.modifyDialog){const s=i.modifySuitData.giftTableData.findIndex(r=>r.id===u.id);i.modifySuitData.giftTableData.splice(s,1)}},handleQueryMainMaterial(){_(!0)}};return ea(()=>{Promise.all([oa().then(u=>{i.departmentTreeData=la(u.departments),u.departments.forEach(s=>{const{id:r,name:f}=s;i.departmentMap.set(Number(r),f),i.departmentMap.set(String(r),f),i.departmentMap.set(f,r)})})]).then(()=>{l()})}),P(()=>i.addDialog,u=>{u||(i.addSuitData={suitSearchParams:{department:"",suitName:""},mainMaterialSearchParams:{searchWord:""},mainMaterialTableData:[],giftTableData:[]})}),P(()=>i.modifyDialog,u=>{u||(i.modifySuitData={suitSearchParams:{department:"",suitName:""},mainMaterialSearchParams:{searchWord:""},mainMaterialTableData:[],giftTableData:[]},i.modifyData={name:"",department:""})}),P(()=>i.addGiftDialog,u=>{u||(i.giftForm={gift_hospital_code:"",gift_name:"",number:1,unit:""},G.addGiftFormRef.value.resetFields())}),P(()=>i.singleDeleteDialog,u=>{u||(i.singleDeleteData={departmentId:"",suitName:""})}),P(()=>i.chooseMainMaterialDialog,u=>{u||(i.materialList=[])}),U(U(U({state:i},G),D),z)}}),fa=g("\u67E5\u8BE2"),ca=g("\u65B0\u589E"),ha=g("\u7F16\u8F91"),ga=g("\u5220\u9664"),Da=e("div",{class:"title"},"\u65B0\u589E\u8D60\u54C1\u5957\u88C5",-1),ba={class:"body"},_a={class:"search-area"},Ma={class:"search-item"},ya={class:"search-item"},Ca={class:"table-area"},Sa={class:"table-box"},Fa={class:"header"},va=e("div",{class:"title"},"\u4E3B\u7269\u6599\u5217\u8868",-1),wa=e("span",null,"\u6DFB\u52A0",-1),Ea={class:"table"},Ba={key:0},Ta={key:1},ka={key:2},Aa=g("\u5220\u9664"),Na={class:"table-area"},Va={class:"table-box"},Pa={class:"header"},Ua=e("div",{class:"title"},"\u8D60\u54C1\u5217\u8868",-1),Ga=e("span",null,"\u6DFB\u52A0",-1),Ia={class:"table"},Wa={key:0},Ha={key:1},La=g("\u5220\u9664"),qa={class:"right-footer"},$a=g("\u53D6\u6D88"),Ra=g("\u4FDD\u5B58"),za=e("div",{class:"title"},"\u4FEE\u6539\u8D60\u54C1\u5957\u88C5",-1),Ka={class:"body"},Oa={class:"search-area"},Qa={class:"search-item"},ja={class:"search-item"},Ja={class:"table-area"},Xa={class:"table-box"},Ya={class:"header"},Za=e("div",{class:"title"},"\u4E3B\u7269\u6599\u5217\u8868",-1),xa=e("span",null,"\u6DFB\u52A0",-1),ae={class:"table"},ee={key:0},te={key:1},ie={key:2},le=g("\u5220\u9664"),oe={class:"table-area"},ne={class:"table-box"},ue={class:"header"},se=e("div",{class:"title"},"\u8D60\u54C1\u5217\u8868",-1),re=e("span",null,"\u6DFB\u52A0",-1),de={class:"table"},me={key:0},pe={key:1},fe=g("\u5220\u9664"),ce={class:"right-footer"},he=g("\u53D6\u6D88"),ge=g("\u786E\u8BA4\u4FEE\u6539"),De=e("div",{class:"title"},"\u9009\u62E9\u4E3B\u7269\u6599",-1),be={class:"body"},_e={class:"search-area"},Me=e("div",{class:"title"},"\u7269\u6599\u5217\u8868",-1),ye={class:"search-item"},Ce={class:"table-area"},Se={key:0},Fe={key:1},ve={key:2},we={class:"pagination-box"},Ee={class:"right-footer"},Be=g("\u786E\u8BA4\u6DFB\u52A0"),Te=e("div",{class:"title"},"\u65B0\u589E\u8D60\u54C1\u4FE1\u606F",-1),ke={class:"body"},Ae={class:"right-footer"},Ne=g("\u53D6\u6D88"),Ve=g("\u786E\u8BA4\u6DFB\u52A0"),Pe=e("div",{class:"title"},"\u63D0\u793A",-1),Ue={class:"tip-body"},Ge=e("img",{src:na,alt:""},null,-1),Ie=g("\u786E\u8BA4\u8981\u5C06\u540D\u4E3A"),We={class:"item-name"},He=g("\u7684\u5957\u88C5"),Le=e("span",{class:"highlight-text"},"\u5220\u9664",-1),qe=g("\u5417?"),$e={class:"right-footer"},Re=g("\u53D6\u6D88"),ze=g("\u786E\u5B9A");function Ke(a,l,_,R,G,z){const i=y("el-input"),D=y("el-button"),u=y("styled-search"),s=y("el-table-column"),r=y("styled-table"),f=y("el-cascader"),h=y("el-icon"),b=y("dialog-table"),M=y("el-dialog"),v=y("styled-pagination"),S=y("el-form-item"),w=y("el-option"),B=y("el-select"),E=y("el-form");return m(),p(T,null,[e(u,{"hide-search-more":""},{"styled-search-left":o(()=>[e(i,{modelValue:a.state.searchParams.suitName,"onUpdate:modelValue":l[1]||(l[1]=t=>a.state.searchParams.suitName=t),placeholder:"\u5957\u88C5\u540D\u79F0",clearable:"",onKeydown:Q(a.handleSearch,["enter"]),onClear:a.handleSearch},null,8,["modelValue","onKeydown","onClear"]),e(D,{type:"primary",class:"search",onClick:a.handleSearch},{default:o(()=>[fa]),_:1},8,["onClick"])]),"styled-search-right":o(()=>[e(D,{type:"success",icon:"el-icon-plus",class:"export",onClick:a.handleAddSuit},{default:o(()=>[ca]),_:1},8,["onClick"])]),_:1}),e(r,{loading:a.state.loading,data:a.state.tableData},{"table-columns":o(()=>[(m(!0),p(T,null,k(a.state.headersConfig,(t,d)=>(m(),p(s,{"show-overflow-tooltip":"",key:d,prop:t.prop,label:t.label,"min-width":a.calcHeaderMinWidth(t,d)},{header:o(n=>[e("span",null,c(n.column.label),1)]),default:o(n=>[e("span",null,c(n.row[t.prop]),1)]),_:2},1032,["prop","label","min-width"]))),128)),e(s,{label:"\u64CD\u4F5C",fixed:"right"},{default:o(t=>[e(D,{type:"text",class:"modify",onClick:d=>a.handleModify(t.row)},{default:o(()=>[ha]),_:2},1032,["onClick"]),e(D,{type:"text",class:"delete",onClick:d=>a.handleSingleDelete(t.row)},{default:o(()=>[ga]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["loading","data"]),e(M,{"custom-class":"suit-manage",width:"875px",modelValue:a.state.addDialog,"onUpdate:modelValue":l[8]||(l[8]=t=>a.state.addDialog=t)},{title:o(()=>[Da]),footer:o(()=>[e("div",qa,[e(D,{onClick:l[7]||(l[7]=t=>a.state.addDialog=!1),class:"cancel"},{default:o(()=>[$a]),_:1}),e(D,{type:"primary",class:"confirm",onClick:a.confirmAddSuit},{default:o(()=>[Ra]),_:1},8,["onClick"])])]),default:o(()=>[e("div",ba,[e("div",_a,[e("div",Ma,[e(f,{modelValue:a.state.addSuitData.suitSearchParams.department,"onUpdate:modelValue":l[2]||(l[2]=t=>a.state.addSuitData.suitSearchParams.department=t),options:a.state.departmentTreeData,props:{checkStrictly:!0,value:"id",label:"name"},placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u90E8\u95E8"},null,8,["modelValue","options"])]),e("div",ya,[e(i,{modelValue:a.state.addSuitData.suitSearchParams.suitName,"onUpdate:modelValue":l[3]||(l[3]=t=>a.state.addSuitData.suitSearchParams.suitName=t),placeholder:"\u8BF7\u8F93\u5165\u5957\u88C5\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),e("div",Ca,[e("div",Sa,[e("div",Fa,[va,e("div",{class:"add",onClick:l[4]||(l[4]=(...t)=>a.handleChooseMainMaterial&&a.handleChooseMainMaterial(...t))},[e(h,{class:"el-icon-plus"}),wa])]),e("div",Ea,[e(b,{data:a.state.addSuitData.mainMaterialTableData,height:200},{"table-columns":o(()=>[(m(!0),p(T,null,k(a.mainMaterialHeadersConfig,(t,d)=>(m(),p(s,{"show-overflow-tooltip":"",key:d,prop:t.prop,label:t.label,"min-width":a.calcHeaderMinWidth(t,d)},{header:o(n=>[e("span",null,c(n.column.label),1)]),default:o(n=>[n.column.property==="brand"?(m(),p("span",Ba,c(a.state.brandIdMap[n.row[t.prop]]),1)):$("",!0),n.column.property==="unit"?(m(),p("span",Ta,c(a.state.MinUnitTypeMap.get(n.row[t.prop])),1)):(m(),p("span",ka,c(n.row[t.prop]),1))]),_:2},1032,["prop","label","min-width"]))),128)),e(s,{label:"\u64CD\u4F5C",width:"80"},{default:o(t=>[e(D,{type:"text",class:"delete",onClick:l[5]||(l[5]=d=>a.state.addSuitData.mainMaterialTableData=[])},{default:o(()=>[Aa]),_:1})]),_:1})]),_:1},8,["data"])])])]),e("div",Na,[e("div",Va,[e("div",Pa,[Ua,e("div",{class:"add",onClick:l[6]||(l[6]=(...t)=>a.handleAddGift&&a.handleAddGift(...t))},[e(h,{class:"el-icon-plus"}),Ga])]),e("div",Ia,[e(b,{data:a.state.addSuitData.giftTableData,height:200},{"table-columns":o(()=>[(m(!0),p(T,null,k(a.giftHeadersConfig,(t,d)=>(m(),p(s,{"show-overflow-tooltip":"",key:d,prop:t.prop,label:t.label,"min-width":a.calcHeaderMinWidth(t,d)},{header:o(n=>[e("span",null,c(n.column.label),1)]),default:o(n=>[n.column.property==="unit"?(m(),p("span",Wa,c(a.state.MinUnitTypeMap.get(n.row[t.prop])),1)):(m(),p("span",Ha,c(n.row[t.prop]),1))]),_:2},1032,["prop","label","min-width"]))),128)),e(s,{label:"\u64CD\u4F5C",width:"80"},{default:o(t=>[e(D,{type:"text",class:"delete",onClick:d=>a.handleDeleteGift(t.row)},{default:o(()=>[La]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])])])]),_:1},8,["modelValue"]),e(M,{"custom-class":"suit-manage",width:"875px",modelValue:a.state.modifyDialog,"onUpdate:modelValue":l[15]||(l[15]=t=>a.state.modifyDialog=t)},{title:o(()=>[za]),footer:o(()=>[e("div",ce,[e(D,{onClick:l[14]||(l[14]=t=>a.state.modifyDialog=!1),class:"cancel"},{default:o(()=>[he]),_:1}),e(D,{type:"primary",class:"confirm",onClick:a.confirmModifySuit},{default:o(()=>[ge]),_:1},8,["onClick"])])]),default:o(()=>[e("div",Ka,[e("div",Oa,[e("div",Qa,[e(f,{modelValue:a.state.modifySuitData.suitSearchParams.department,"onUpdate:modelValue":l[9]||(l[9]=t=>a.state.modifySuitData.suitSearchParams.department=t),options:a.state.departmentTreeData,props:{checkStrictly:!0,value:"id",label:"name"},placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u90E8\u95E8"},null,8,["modelValue","options"])]),e("div",ja,[e(i,{modelValue:a.state.modifySuitData.suitSearchParams.suitName,"onUpdate:modelValue":l[10]||(l[10]=t=>a.state.modifySuitData.suitSearchParams.suitName=t),placeholder:"\u8BF7\u8F93\u5165\u5957\u88C5\u540D\u79F0",clearable:""},null,8,["modelValue"])])]),e("div",Ja,[e("div",Xa,[e("div",Ya,[Za,e("div",{class:"add",onClick:l[11]||(l[11]=(...t)=>a.handleChooseMainMaterial&&a.handleChooseMainMaterial(...t))},[e(h,{class:"el-icon-plus"}),xa])]),e("div",ae,[e(b,{data:a.state.modifySuitData.mainMaterialTableData,height:200},{"table-columns":o(()=>[(m(!0),p(T,null,k(a.mainMaterialHeadersConfig,(t,d)=>(m(),p(s,{"show-overflow-tooltip":"",key:d,prop:t.prop,label:t.label,"min-width":a.calcHeaderMinWidth(t,d)},{header:o(n=>[e("span",null,c(n.column.label),1)]),default:o(n=>[n.column.property==="brand"?(m(),p("span",ee,c(a.state.brandIdMap[n.row[t.prop]]),1)):$("",!0),n.column.property==="unit"?(m(),p("span",te,c(a.state.MinUnitTypeMap.get(n.row[t.prop])),1)):(m(),p("span",ie,c(n.row[t.prop]),1))]),_:2},1032,["prop","label","min-width"]))),128)),e(s,{label:"\u64CD\u4F5C",width:"80"},{default:o(t=>[e(D,{type:"text",class:"delete",onClick:l[12]||(l[12]=d=>a.state.modifySuitData.mainMaterialTableData=[])},{default:o(()=>[le]),_:1})]),_:1})]),_:1},8,["data"])])])]),e("div",oe,[e("div",ne,[e("div",ue,[se,e("div",{class:"add",onClick:l[13]||(l[13]=(...t)=>a.handleAddGift&&a.handleAddGift(...t))},[e(h,{class:"el-icon-plus"}),re])]),e("div",de,[e(b,{data:a.state.modifySuitData.giftTableData,height:200},{"table-columns":o(()=>[(m(!0),p(T,null,k(a.giftHeadersConfig,(t,d)=>(m(),p(s,{"show-overflow-tooltip":"",key:d,prop:t.prop,label:t.label,"min-width":a.calcHeaderMinWidth(t,d)},{header:o(n=>[e("span",null,c(n.column.label),1)]),default:o(n=>[n.column.property==="unit"?(m(),p("span",me,c(a.state.MinUnitTypeMap.get(n.row[t.prop])),1)):(m(),p("span",pe,c(n.row[t.prop]),1))]),_:2},1032,["prop","label","min-width"]))),128)),e(s,{label:"\u64CD\u4F5C",width:"80"},{default:o(t=>[e(D,{type:"text",class:"delete",onClick:d=>a.handleDeleteGift(t.row)},{default:o(()=>[fe]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])])])]),_:1},8,["modelValue"]),e(M,{"custom-class":"choose-mainmaterial",width:"710px",modelValue:a.state.chooseMainMaterialDialog,"onUpdate:modelValue":l[19]||(l[19]=t=>a.state.chooseMainMaterialDialog=t)},{title:o(()=>[De]),footer:o(()=>[e("div",Ee,[e(D,{type:"primary",class:"confirm",onClick:a.handleConfirmAddMainMaterial},{default:o(()=>[Be]),_:1},8,["onClick"])])]),default:o(()=>[e("div",be,[e("div",_e,[Me,e("div",ye,[e(i,{modelValue:a.state.addSuitData.mainMaterialSearchParams.searchWord,"onUpdate:modelValue":l[16]||(l[16]=t=>a.state.addSuitData.mainMaterialSearchParams.searchWord=t),placeholder:"\u8BF7\u8F93\u5165\u67E5\u8BE2\u5173\u952E\u5B57",clearable:"",onKeydown:Q(a.handleQueryMainMaterial,["enter"]),onClear:a.handleQueryMainMaterial},null,8,["modelValue","onKeydown","onClear"])])]),e("div",Ce,[e(b,{loading:a.state.materialLoading,multiple:"",data:a.state.materialList,height:300,onChangeMultiple:a.handleMainMaterialMultipleChange},{"table-columns":o(()=>[(m(!0),p(T,null,k(a.mainMaterialHeadersConfig,(t,d)=>(m(),p(s,{"show-overflow-tooltip":"",key:d,prop:t.prop,label:t.label,"min-width":a.calcHeaderMinWidth(t,d)},{header:o(n=>[e("span",null,c(n.column.label),1)]),default:o(n=>[n.column.property==="brand"?(m(),p("span",Se,c(a.state.brandIdMap[n.row[t.prop]]),1)):$("",!0),n.column.property==="unit"?(m(),p("span",Fe,c(a.state.MinUnitTypeMap.get(n.row[t.prop])),1)):(m(),p("span",ve,c(n.row[t.prop]),1))]),_:2},1032,["prop","label","min-width"]))),128))]),_:1},8,["loading","data","onChangeMultiple"]),e("div",we,[e(v,{total:a.state.pagination.total,"current-page":a.state.pagination.currentPage,"onUpdate:current-page":l[17]||(l[17]=t=>a.state.pagination.currentPage=t),"page-size":a.state.pagination.pageSize,"onUpdate:page-size":l[18]||(l[18]=t=>a.state.pagination.pageSize=t),onPaginationChange:a.handlePaginationChange},null,8,["total","current-page","page-size","onPaginationChange"])])])])]),_:1},8,["modelValue"]),e(M,{"custom-class":"gift-form",width:"466px",modelValue:a.state.addGiftDialog,"onUpdate:modelValue":l[25]||(l[25]=t=>a.state.addGiftDialog=t)},{title:o(()=>[Te]),footer:o(()=>[e("div",Ae,[e(D,{onClick:l[24]||(l[24]=t=>a.state.addGiftDialog=!1),class:"cancel"},{default:o(()=>[Ne]),_:1}),e(D,{type:"primary",class:"confirm",onClick:a.confirmAddGift},{default:o(()=>[Ve]),_:1},8,["onClick"])])]),default:o(()=>[e("div",ke,[e(E,{model:a.state.giftForm,rules:a.addGiftFormRules,ref:"addGiftFormRef"},{default:o(()=>[e(S,{label:"\u8D60\u54C1\u9662\u5185\u7801","label-width":a.labelWidth},{default:o(()=>[e(i,{modelValue:a.state.giftForm.gift_hospital_code,"onUpdate:modelValue":l[20]||(l[20]=t=>a.state.giftForm.gift_hospital_code=t),placeholder:"\u8BF7\u8F93\u5165\u8D60\u54C1\u9662\u5185\u7801",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"]),e(S,{label:"\u8D60\u54C1\u540D\u79F0","label-width":a.labelWidth,prop:"gift_name"},{default:o(()=>[e(i,{modelValue:a.state.giftForm.gift_name,"onUpdate:modelValue":l[21]||(l[21]=t=>a.state.giftForm.gift_name=t),placeholder:"\u8BF7\u8F93\u5165\u8D60\u54C1\u540D\u79F0",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"]),e(S,{label:"\u8D60\u54C1\u6570\u91CF","label-width":a.labelWidth,prop:"number"},{default:o(()=>[e(i,{modelValue:a.state.giftForm.number,"onUpdate:modelValue":l[22]||(l[22]=t=>a.state.giftForm.number=t),placeholder:"\u8BF7\u8F93\u5165\u8D60\u54C1\u6570\u91CF",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"]),e(S,{label:"\u8D60\u54C1\u5355\u4F4D","label-width":a.labelWidth,prop:"unit"},{default:o(()=>[e(B,{modelValue:a.state.giftForm.unit,"onUpdate:modelValue":l[23]||(l[23]=t=>a.state.giftForm.unit=t),placeholder:"\u8BF7\u8F93\u5165\u91C7\u8D2D\u5355\u4F4D"},{default:o(()=>[(m(!0),p(T,null,k(a.state.MinUnitTypeOptions,t=>(m(),p(w,{label:t.label,value:t.value,key:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"]),e(M,{width:"466px",modelValue:a.state.singleDeleteDialog,"onUpdate:modelValue":l[27]||(l[27]=t=>a.state.singleDeleteDialog=t)},{title:o(()=>[Pe]),footer:o(()=>[e("div",$e,[e(D,{onClick:l[26]||(l[26]=t=>a.state.singleDeleteDialog=!1),class:"cancel"},{default:o(()=>[Re]),_:1}),e(D,{type:"primary",onClick:a.confirmSingleDelete,class:"confirm"},{default:o(()=>[ze]),_:1},8,["onClick"])])]),default:o(()=>[e("div",Ue,[Ge,e("span",null,[Ie,e("span",We,c(a.state.singleDeleteData.suitName),1),He,Le,qe])])]),_:1},8,["modelValue"])],64)}var Ye=ta(pa,[["render",Ke]]);export{Ye as default};
