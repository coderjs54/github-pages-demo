var v=Object.defineProperty,N=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var k=(e,a,n)=>a in e?v(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,y=(e,a)=>{for(var n in a||(a={}))V.call(a,n)&&k(e,n,a[n]);if(M)for(var n of M(a))z.call(a,n)&&k(e,n,a[n]);return e},_=(e,a)=>N(e,H(a));import{d as O,i as E,r as T,c as I,I as D,w as U,o as q,E as u,m as p,q as d,y as r,G as s,N as L,C as F,z as C,K as G,F as R,A as K}from"../vendors/element-plus-6f9977bb.js";import{r as W,U as $,_ as J,u as Q,b as Z,d as j}from"./index.1a2bb961.js";function X(e){return W.post($.ORDER.queryOrder,e)}const Y=O({setup(){const e=Q(),a=Z(),n=j(),B=E("setTableHeaders"),S=()=>{t.loading=!0;const{pageSize:l,currentPage:c}=D(t.pagination),{shortname:i,acceptStatus:g}=D(t.searchParam);X({search_word:i,IsHChemical:0,IsReceiveDeliverOrder:2,SendStatus:2,IsAccept:g,NeedPaging:!0,PageNum:c,RecordPerPage:l}).then(o=>{t.pagination.total=o.TotalRecordCount,A(o.AutoOrderInfo)}).finally(()=>{t.loading=!1})},A=l=>{t.tableData=l.map(c=>{const{material:i,autostore:g}=c;return _(y({},g),{hospitalCode:i.hospital_code,brandName:t.brandIdMap[i.brand_id]})})},m=l=>{l&&(t.pagination.currentPage=1),S()},t=T({loading:!1,searchParam:{shortname:"",acceptStatus:0},pagination:{currentPage:1,total:0,pageSize:30},headersConfig:[{label:"\u5E8F\u53F7",prop:"id"},{label:"\u8BA2\u5355\u7F16\u53F7",prop:"DJH"},{label:"\u5BA1\u6838\u65E5\u671F",prop:"SHRQ"},{label:"\u7269\u6599\u540D\u79F0",prop:"ZCMC"},{label:"\u9662\u5185\u7801",prop:"hospitalCode"},{label:"\u89C4\u683C\u578B\u53F7",prop:"GGXH"},{label:"\u54C1\u724C",prop:"brandName"},{label:"\u5355\u4F4D",prop:"UNIT"},{label:"\u6570\u91CF",prop:"AMOUNT"},{label:"\u7533\u8BF7\u90E8\u95E8\u540D\u79F0",prop:"SQBMMC"},{label:"\u4F9B\u8D27\u5355\u4F4D\u540D\u79F0",prop:"GHDWMC"},{label:"\u8BA2\u5355\u65F6\u95F4",prop:"JLSCRQ"},{label:"\u5236\u5355\u4EBA\u540D\u79F0",prop:"ZDRMC"},{label:"\u5907\u6CE8",prop:"Remark"},{label:"\u4E70A\u6362B",prop:"buy_a_to_b",hidden:!n.getters.buyAToB}],tableData:[],multipleSelection:[],brandIdMap:I(()=>n.getters.brandIdMap),is_prod:localStorage.getItem("Is_Production")==="true"}),f=I(()=>t.headersConfig.filter(l=>!l.hidden)),b={calcHeaderWidth:E("calcHeaderMinWidth"),handleClickSetting(){B(t.headersConfig,l=>{t.headersConfig=l})},handlePaginationChange(){m(!1)},handleSearch(){m(!0)},handleChangeMultiple(l){t.multipleSelection=l},handleAddDelivery(){const l=D(t.multipleSelection);!l.length||e.push({name:"adddelivery-test",params:{tableData:JSON.stringify(l)}})}};return U(()=>n.getters.settings,()=>{t.headersConfig=n.getters.settings[a.name]||t.headersConfig}),q(()=>{S()}),_(y({state:t},b),{headersShown:f})}}),x=F("\u67E5\u8BE2"),ee={key:1};function ae(e,a,n,B,S,A){const m=u("el-input"),t=u("el-option"),f=u("el-select"),b=u("el-button"),l=u("styled-search"),c=u("el-tag"),i=u("el-table-column"),g=u("styled-table"),P=u("styled-pagination");return p(),d(R,null,[r(l,{"hide-search-more":""},{"styled-search-left":s(()=>[r(m,{modelValue:e.state.searchParam.shortname,"onUpdate:modelValue":a[1]||(a[1]=o=>e.state.searchParam.shortname=o),placeholder:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0\u3001\u7B80\u79F0",clearable:"",onKeydown:L(e.handleSearch,["enter"]),onClear:e.handleSearch},null,8,["modelValue","onKeydown","onClear"]),r(f,{modelValue:e.state.searchParam.acceptStatus,"onUpdate:modelValue":a[2]||(a[2]=o=>e.state.searchParam.acceptStatus=o),placeholder:"\u8BF7\u9009\u62E9\u8BA2\u5355\u4EA4\u8D27\u72B6\u6001",onChange:e.handleSearch},{default:s(()=>[r(t,{label:"\u5168\u90E8\u8BA2\u5355",value:2}),r(t,{label:"\u5DF2\u9A8C\u6536\u8BA2\u5355",value:1}),r(t,{label:"\u672A\u9A8C\u6536\u8BA2\u5355",value:0})]),_:1},8,["modelValue","onChange"]),r(b,{type:"primary",class:"search",onClick:e.handleSearch},{default:s(()=>[x]),_:1},8,["onClick"])]),"styled-search-right":s(()=>[e.state.is_prod?G("",!0):(p(),d(b,{key:0,type:"primary",disabled:e.state.multipleSelection.length===0,class:"search",onClick:e.handleAddDelivery},{default:s(()=>[F("\u53BB\u4EA4\u8D27("+C(e.state.multipleSelection.length)+")",1)]),_:1},8,["disabled","onClick"]))]),_:1}),r(g,{loading:e.state.loading,multiple:"",setting:"",data:e.state.tableData,onClickSetting:e.handleClickSetting,onChangeMultiple:e.handleChangeMultiple},{"table-columns":s(()=>[(p(!0),d(R,null,K(e.headersShown,(o,w)=>(p(),d(i,{"show-overflow-tooltip":"",key:w,prop:o.prop,label:o.label,"min-width":e.calcHeaderWidth(o,w)},{header:s(h=>[r("span",null,C(h.column.label),1)]),default:s(h=>[o.prop==="IS_Danger"?(p(),d(c,{key:0,class:h.row.IS_Danger==="\u662F"?"danger-material":"normal-material"},{default:s(()=>[F(C(h.row.IS_Danger),1)]),_:2},1032,["class"])):(p(),d("span",ee,C(h.row[o.prop]),1))]),_:2},1032,["prop","label","min-width"]))),128))]),_:1},8,["loading","data","onClickSetting","onChangeMultiple"]),r(P,{total:e.state.pagination.total,"current-page":e.state.pagination.currentPage,"onUpdate:current-page":a[3]||(a[3]=o=>e.state.pagination.currentPage=o),"page-size":e.state.pagination.pageSize,"onUpdate:page-size":a[4]||(a[4]=o=>e.state.pagination.pageSize=o),onPaginationChange:e.handlePaginationChange},null,8,["total","current-page","page-size","onPaginationChange"])],64)}var oe=J(Y,[["render",ae]]);export{oe as default};
