System.register(["../vendors/element-plus-legacy-e48d1ae3.js","./index-legacy.acc39ef9.js"],(function(e){"use strict";var a,t,l,n,r,o,i,d,s,p,c,g,h,u,m,b,C,S,y,f,P,_,D,I;return{setters:[function(e){a=e.d,t=e.i,l=e.r,n=e.c,r=e.I,o=e.w,i=e.o,d=e.E,s=e.m,p=e.q,c=e.y,g=e.G,h=e.N,u=e.C,m=e.z,b=e.K,C=e.F,S=e.A},function(e){y=e.r,f=e.U,P=e._,_=e.u,D=e.b,I=e.d}],execute:function(){const M=a({setup(){const e=_(),a=D(),d=I(),s=t("setTableHeaders"),p=()=>{h.loading=!0;const{pageSize:e,currentPage:a}=r(h.pagination),{shortname:t,acceptStatus:l}=r(h.searchParam);(function(e){return y.post(f.ORDER.queryOrder,e)})({search_word:t,IsHChemical:0,IsReceiveDeliverOrder:2,SendStatus:2,IsAccept:l,NeedPaging:!0,PageNum:a,RecordPerPage:e}).then((e=>{h.pagination.total=e.TotalRecordCount,c(e.AutoOrderInfo)})).finally((()=>{h.loading=!1}))},c=e=>{h.tableData=e.map((e=>{const{material:a,autostore:t}=e;return{...t,hospitalCode:a.hospital_code,brandName:h.brandIdMap[a.brand_id]}}))},g=e=>{e&&(h.pagination.currentPage=1),p()},h=l({loading:!1,searchParam:{shortname:"",acceptStatus:0},pagination:{currentPage:1,total:0,pageSize:30},headersConfig:[{label:"序号",prop:"id"},{label:"订单编号",prop:"DJH"},{label:"审核日期",prop:"SHRQ"},{label:"物料名称",prop:"ZCMC"},{label:"院内码",prop:"hospitalCode"},{label:"规格型号",prop:"GGXH"},{label:"品牌",prop:"brandName"},{label:"单位",prop:"UNIT"},{label:"数量",prop:"AMOUNT"},{label:"申请部门名称",prop:"SQBMMC"},{label:"供货单位名称",prop:"GHDWMC"},{label:"订单时间",prop:"JLSCRQ"},{label:"制单人名称",prop:"ZDRMC"},{label:"备注",prop:"Remark"},{label:"买A换B",prop:"buy_a_to_b",hidden:!d.getters.buyAToB}],tableData:[],multipleSelection:[],brandIdMap:n((()=>d.getters.brandIdMap)),is_prod:"true"===localStorage.getItem("Is_Production")}),u=n((()=>h.headersConfig.filter((e=>!e.hidden)))),m={calcHeaderWidth:t("calcHeaderMinWidth"),handleClickSetting(){s(h.headersConfig,(e=>{h.headersConfig=e}))},handlePaginationChange(){g(!1)},handleSearch(){g(!0)},handleChangeMultiple(e){h.multipleSelection=e},handleAddDelivery(){const a=r(h.multipleSelection);a.length&&e.push({name:"adddelivery-test",params:{tableData:JSON.stringify(a)}})}};return o((()=>d.getters.settings),(()=>{h.headersConfig=d.getters.settings[a.name]||h.headersConfig})),i((()=>{p()})),{state:h,...m,headersShown:u}}}),k=u("查询"),w={key:1};e("default",P(M,[["render",function(e,a,t,l,n,r){const o=d("el-input"),i=d("el-option"),y=d("el-select"),f=d("el-button"),P=d("styled-search"),_=d("el-tag"),D=d("el-table-column"),I=d("styled-table"),M=d("styled-pagination");return s(),p(C,null,[c(P,{"hide-search-more":""},{"styled-search-left":g((()=>[c(o,{modelValue:e.state.searchParam.shortname,"onUpdate:modelValue":a[1]||(a[1]=a=>e.state.searchParam.shortname=a),placeholder:"请输入物料名称、简称",clearable:"",onKeydown:h(e.handleSearch,["enter"]),onClear:e.handleSearch},null,8,["modelValue","onKeydown","onClear"]),c(y,{modelValue:e.state.searchParam.acceptStatus,"onUpdate:modelValue":a[2]||(a[2]=a=>e.state.searchParam.acceptStatus=a),placeholder:"请选择订单交货状态",onChange:e.handleSearch},{default:g((()=>[c(i,{label:"全部订单",value:2}),c(i,{label:"已验收订单",value:1}),c(i,{label:"未验收订单",value:0})])),_:1},8,["modelValue","onChange"]),c(f,{type:"primary",class:"search",onClick:e.handleSearch},{default:g((()=>[k])),_:1},8,["onClick"])])),"styled-search-right":g((()=>[e.state.is_prod?b("",!0):(s(),p(f,{key:0,type:"primary",disabled:0===e.state.multipleSelection.length,class:"search",onClick:e.handleAddDelivery},{default:g((()=>[u("去交货("+m(e.state.multipleSelection.length)+")",1)])),_:1},8,["disabled","onClick"]))])),_:1}),c(I,{loading:e.state.loading,multiple:"",setting:"",data:e.state.tableData,onClickSetting:e.handleClickSetting,onChangeMultiple:e.handleChangeMultiple},{"table-columns":g((()=>[(s(!0),p(C,null,S(e.headersShown,((a,t)=>(s(),p(D,{"show-overflow-tooltip":"",key:t,prop:a.prop,label:a.label,"min-width":e.calcHeaderWidth(a,t)},{header:g((e=>[c("span",null,m(e.column.label),1)])),default:g((e=>["IS_Danger"===a.prop?(s(),p(_,{key:0,class:"是"===e.row.IS_Danger?"danger-material":"normal-material"},{default:g((()=>[u(m(e.row.IS_Danger),1)])),_:2},1032,["class"])):(s(),p("span",w,m(e.row[a.prop]),1))])),_:2},1032,["prop","label","min-width"])))),128))])),_:1},8,["loading","data","onClickSetting","onChangeMultiple"]),c(M,{total:e.state.pagination.total,"current-page":e.state.pagination.currentPage,"onUpdate:current-page":a[3]||(a[3]=a=>e.state.pagination.currentPage=a),"page-size":e.state.pagination.pageSize,"onUpdate:page-size":a[4]||(a[4]=a=>e.state.pagination.pageSize=a),onPaginationChange:e.handlePaginationChange},null,8,["total","current-page","page-size","onPaginationChange"])],64)}]]))}}}));
