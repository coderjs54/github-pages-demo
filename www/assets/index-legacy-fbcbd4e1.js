System.register(["./menu-legacy-1adae44a.js","./index-legacy.acc39ef9.js"],(function(e){"use strict";var t,n,s,u,r,o,i;return{setters:[function(e){t=e.m},function(e){n=e.r,s=e.U,u=e.c,r=e.G,o=e.a,i=e.s}],execute:function(){e("r",(function(e){return n.post(s.LOGIN.login,e)}));const{commit:c}=i,a=(e("g",(e=>new Promise(((t,u)=>{n.post(s.USER.getServerInfo,{}).then((e=>{const t=e.IsProduction;c(r,t),localStorage.setItem("Is_Production",String(t))})),function(e=""){return n.post(s.ROLE.queryRole,{search_word:e})}().then((n=>{const s=n.roles,u=Object.fromEntries(s.map((e=>[e.id,e.CanSeeBuyAToB]))),r=e.map((e=>u[e])).some((e=>Boolean(e)));c(o,r),localStorage.setItem("Buy_A_To_B",String(r));const i=Object.fromEntries(s.map((e=>{return[e.id,(t=e.MenuList,t||(t="[]"),t.slice(1,-1).split(","))];var t}))),a=e.map((e=>i[e])),m=[...new Set(a.flat())];t(m)})).catch((()=>{u([])}))})))),(e,t,n)=>{for(let s=0;s<t.length;s++)t[s].submenus?(e.push({...t[s],submenus:[]}),a(e[s].submenus,t[s].submenus,n)):n.indexOf(t[s].id)>-1&&e.push({...t[s]})}),m=(e,t)=>{for(let n=0;n<t.length;n++)t[n].submenus?0===t[n].submenus.length||(e.push({...t[n],submenus:[]}),m(e.at(-1).submenus,t[n].submenus)):e.push({...t[n]})};e("a",(()=>{const e=((e,t)=>t.map((t=>{const{submenus:n,...s}=t;return{...s,submenus:n.filter((t=>e?!t.hide_on_prod:t))}})))("true"===localStorage.getItem("Is_Production"),t);if("admin"===u.getEncryptItem("admin"))return e;{const t=JSON.parse(localStorage.getItem("USER_MENU_IDS")),n=[...new Set(t.map((e=>null==e?void 0:e.split("-")[0])))];let s=[],u=[];return a(s,e,t),m(u,s.filter((e=>n.indexOf(e.id)>-1))),u}}))}}}));
