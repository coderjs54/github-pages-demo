System.register(["../vendors/element-plus-legacy-e48d1ae3.js","./index-legacy.acc39ef9.js","./uploadrequest-legacy-2abb266e.js","./concurrent-legacy-5288d5cc.js","./index-legacy-d07ee124.js","./tip-legacy-d18ff986.js"],(function(e){"use strict";var l,a,t,n,i,d,o,s,c,r,g,u,m,f,h,p,D,y,b,A,C,F,M,_,w;return{setters:[function(e){l=e.d,a=e.i,t=e.a,n=e.r,i=e.I,d=e.S,o=e.o,s=e.w,c=e.E,r=e.m,g=e.q,u=e.y,m=e.G,f=e.N,h=e.F,p=e.A,D=e.z,y=e.C},function(e){b=e.r,A=e.U,C=e._},function(e){F=e.r},function(e){M=e.C},function(e){_=e.u},function(e){w=e._}],execute:function(){function V(e){const l=new FormData;return l.set("MultipartFile",e),F.post(A.BRAND.batchAddBrand,l,{headers:{"Content-Type":"multipart/form-data"}})}function k(e){return b.post(A.BRAND.deleteBrand,{id:e})}const v=l({setup(){const e=a("singleUpload"),l=a("downloadTemplate"),c=()=>{u.loading=!0,function(e=""){return b.post(A.BRAND.queryBrand,{search_word:e})}(u.searchVal).then((e=>{r(e.brands)})).finally((()=>{u.loading=!1}))},r=e=>{u.tableData=e.map((e=>{let{id:l,name:a}=e;return{id:l,brandNumber:"这是品牌编号",brandName:a}}))},g={styledUploadRef:t(null),singleAddFormRef:t(null),singleModifyFormRef:t(null)},u=n({loading:!1,uploading:!1,searchVal:"",tableData:[],headersConfig:[{label:"序号",prop:"id"},{label:"品牌",prop:"brandName"}],multipleSelection:[],singleAddDialog:!1,batchAddDialog:!1,singleDelDialog:!1,batchDelDialog:!1,singleModifyDialog:!1,singleAddForm:{name:""},singleModifyForm:{id:"",name:""},singleDelDialogData:{id:"",name:""},batchDelDialogData:[],batchDeleting:!1}),m={calcHeaderMinWidth:a("calcHeaderMinWidth"),handleChangeMultiple(e){u.multipleSelection=e},handleSearch(){c()},handleAdd(){u.singleAddDialog=!0},handleBatchAdd(){u.batchAddDialog=!0},handleModify(e){u.singleModifyDialog=!0;const{id:l,brandName:a}=i(e);u.singleModifyForm={id:l,name:a}},handleBatchDelete(){u.batchDelDialog=!0},confirmBatchDelete(){const e=u.multipleSelection.map((e=>e.id));u.batchDeleting=!0,function(e,l){const a=new M({concurrent:5,total:e.length,requestFunc:k});for(let t=0;t<e.length;t++)a.request(e[t],l)}(e,(l=>{u.batchDelDialog=!1;const a=l.filter((e=>e.success));a.length===e.length?d.success(`成功删除选中的${a.length}个品牌`):d.error(`成功删除选中的${a.length}个品牌，有${e.length-a.length}个删除失败`),c(),u.batchDeleting=!1}))},handleSingleDelete(e){u.singleDelDialog=!0;const{id:l,brandName:a}=i(e);u.singleDelDialogData={id:l,name:a}},confirmSingleAdd(){g.singleAddFormRef.value.validate((e=>{if(!e)return;let{name:l}=i(u.singleAddForm);(function(e){return b.post(A.BRAND.addBrand,{name:e})})(l).then((()=>{d.success("操作成功"),c(),_()})).finally((()=>{u.singleAddDialog=!1}))}))},handleDownloadTemplate(){l("Brand")},handleUpload(l){u.uploading=!0,e(l,V).then((()=>{d.success("操作成功"),c(),_()})).finally((()=>{u.uploading=!1,u.batchAddDialog=!1}))},confirmSingleDel(){const{id:e}=i(u.singleDelDialogData);k(String(e)).then((()=>{d.success("操作成功"),c(),_()})).finally((()=>{u.singleDelDialog=!1}))},confirmSingleModify(){g.singleModifyFormRef.value.validate((e=>{if(!e)return;const{id:l,name:a}=i(u.singleModifyForm);var t;(t={id:l,name:a},b.post(A.BRAND.modifyBrand,t)).then((()=>{d.success("操作成功"),c(),_()})).finally((()=>{u.singleModifyDialog=!1}))}))}};return o((()=>{c()})),s((()=>u.singleAddDialog),(e=>{e||(u.singleAddForm={name:""},g.singleAddFormRef.value.resetFields())})),s((()=>u.singleDelDialog),(e=>{e||(u.singleDelDialogData={id:"",name:""})})),s((()=>u.singleModifyDialog),(e=>{e||(u.singleModifyForm={id:"",name:""})})),s((()=>u.batchAddDialog),(e=>{e||g.styledUploadRef.value.clearFiles()})),{state:u,...g,...m,labelWidth:"80px",singAddFormRules:{name:[{required:!0,message:"请输入品牌名称",trigger:"blur"}]},singleModifyFormRules:{name:[{required:!0,message:"请输入品牌名称",trigger:"blur"}]}}}}),S=y("查询"),R=y("新增"),B=y("批量新增"),U=y("删除选择"),x=y("编辑"),N=y("删除"),q=u("div",{class:"title"},"新增品牌",-1),j={class:"center-footer"},T=y("取消"),W=y("确认"),H=u("div",{class:"title"},"编辑品牌",-1),$={class:"center-footer"},K=y("取消"),z=y("确认"),E=u("div",{class:"title"},"批量导入",-1),G=u("div",{class:"title"},"提示",-1),I={class:"tip-body"},J=u("img",{src:w,alt:""},null,-1),L=y("确认要将名为"),O={class:"item-name"},P=y("的品牌"),Q=u("span",{class:"highlight-text"},"删除",-1),X=y("吗?"),Y={class:"right-footer"},Z=y("取消"),ee=y("确定"),le=u("div",{class:"title"},"提示",-1),ae={class:"tip-body"},te=u("img",{src:w,alt:""},null,-1),ne=y("确认要将所选中的"),ie={class:"item-name"},de=y("个品牌"),oe=u("span",{class:"highlight-text"},"删除",-1),se=y("吗?"),ce={class:"right-footer"},re=y("取消"),ge=y("确定");e("default",C(v,[["render",function(e,l,a,t,n,i){const d=c("el-input"),o=c("el-button"),s=c("styled-search"),y=c("el-table-column"),b=c("styled-table"),A=c("el-form-item"),C=c("el-form"),F=c("el-dialog"),M=c("styled-upload");return r(),g(h,null,[u(s,{"hide-search-more":""},{"styled-search-left":m((()=>[u(d,{modelValue:e.state.searchVal,"onUpdate:modelValue":l[1]||(l[1]=l=>e.state.searchVal=l),placeholder:"请输入品牌名称",clearable:"",onKeydown:f(e.handleSearch,["enter"]),onClear:e.handleSearch},null,8,["modelValue","onKeydown","onClear"]),u(o,{type:"primary",class:"search",onClick:e.handleSearch},{default:m((()=>[S])),_:1},8,["onClick"])])),"styled-search-right":m((()=>[u(o,{type:"success",icon:"el-icon-plus",class:"export",onClick:e.handleAdd},{default:m((()=>[R])),_:1},8,["onClick"]),u(o,{type:"success",class:"export",onClick:e.handleBatchAdd},{default:m((()=>[B])),_:1},8,["onClick"]),u(o,{type:"danger",disabled:0===e.state.multipleSelection.length,class:"delete",onClick:e.handleBatchDelete},{default:m((()=>[U])),_:1},8,["disabled","onClick"])])),_:1}),u(b,{loading:e.state.loading,multiple:"",data:e.state.tableData,onChangeMultiple:e.handleChangeMultiple},{"table-columns":m((()=>[(r(!0),g(h,null,p(e.state.headersConfig,((l,a)=>(r(),g(y,{"show-overflow-tooltip":"",key:a,prop:l.prop,label:l.label,"min-width":e.calcHeaderMinWidth(l,a)},{header:m((e=>[u("span",null,D(e.column.label),1)])),default:m((e=>[u("span",null,D(e.row[l.prop]),1)])),_:2},1032,["prop","label","min-width"])))),128)),u(y,{label:"操作",fixed:"right"},{default:m((l=>[u(o,{type:"text",class:"modify",onClick:a=>e.handleModify(l.row)},{default:m((()=>[x])),_:2},1032,["onClick"]),u(o,{type:"text",class:"delete",onClick:a=>e.handleSingleDelete(l.row)},{default:m((()=>[N])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["loading","data","onChangeMultiple"]),u(F,{width:"516px",modelValue:e.state.singleAddDialog,"onUpdate:modelValue":l[4]||(l[4]=l=>e.state.singleAddDialog=l)},{title:m((()=>[q])),footer:m((()=>[u("div",j,[u(o,{onClick:l[3]||(l[3]=l=>e.state.singleAddDialog=!1),class:"cancel"},{default:m((()=>[T])),_:1}),u(o,{type:"primary",onClick:e.confirmSingleAdd,class:"confirm"},{default:m((()=>[W])),_:1},8,["onClick"])])])),default:m((()=>[u(C,{model:e.state.singleAddForm,rules:e.singAddFormRules,ref:"singleAddFormRef"},{default:m((()=>[u(A,{label:"品牌名称","label-width":e.labelWidth,prop:"name"},{default:m((()=>[u(d,{modelValue:e.state.singleAddForm.name,"onUpdate:modelValue":l[2]||(l[2]=l=>e.state.singleAddForm.name=l),placeholder:"请输入品牌名称",autocomplete:"off",clearable:""},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),u(F,{width:"516px",modelValue:e.state.singleModifyDialog,"onUpdate:modelValue":l[7]||(l[7]=l=>e.state.singleModifyDialog=l)},{title:m((()=>[H])),footer:m((()=>[u("div",$,[u(o,{onClick:l[6]||(l[6]=l=>e.state.singleModifyDialog=!1),class:"cancel"},{default:m((()=>[K])),_:1}),u(o,{type:"primary",onClick:e.confirmSingleModify,class:"confirm"},{default:m((()=>[z])),_:1},8,["onClick"])])])),default:m((()=>[u(C,{model:e.state.singleModifyForm,rules:e.singleModifyFormRules,ref:"singleModifyFormRef"},{default:m((()=>[u(A,{label:"品牌名称","label-width":e.labelWidth,prop:"name"},{default:m((()=>[u(d,{modelValue:e.state.singleModifyForm.name,"onUpdate:modelValue":l[5]||(l[5]=l=>e.state.singleModifyForm.name=l),placeholder:"请输入品牌名称",autocomplete:"off",clearable:""},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),u(F,{width:"620px","custom-class":"upload",modelValue:e.state.batchAddDialog,"onUpdate:modelValue":l[8]||(l[8]=l=>e.state.batchAddDialog=l)},{title:m((()=>[E])),default:m((()=>[u(M,{ref:"styledUploadRef",uploading:e.state.uploading,"upload-label":"导入品牌","download-label":"下载物料品牌模版",onUploadFile:e.handleUpload,onDownloadTemplate:e.handleDownloadTemplate},null,8,["uploading","onUploadFile","onDownloadTemplate"])])),_:1},8,["modelValue"]),u(F,{width:"466px",modelValue:e.state.singleDelDialog,"onUpdate:modelValue":l[10]||(l[10]=l=>e.state.singleDelDialog=l)},{title:m((()=>[G])),footer:m((()=>[u("div",Y,[u(o,{onClick:l[9]||(l[9]=l=>e.state.singleDelDialog=!1),class:"cancel"},{default:m((()=>[Z])),_:1}),u(o,{type:"primary",onClick:e.confirmSingleDel,class:"confirm"},{default:m((()=>[ee])),_:1},8,["onClick"])])])),default:m((()=>[u("div",I,[J,u("span",null,[L,u("span",O,D(e.state.singleDelDialogData.name),1),P,Q,X])])])),_:1},8,["modelValue"]),u(F,{width:"466px",modelValue:e.state.batchDelDialog,"onUpdate:modelValue":l[12]||(l[12]=l=>e.state.batchDelDialog=l)},{title:m((()=>[le])),footer:m((()=>[u("div",ce,[u(o,{onClick:l[11]||(l[11]=l=>e.state.batchDelDialog=!1),class:"cancel"},{default:m((()=>[re])),_:1}),u(o,{type:"primary",loading:e.state.batchDeleting,onClick:e.confirmBatchDelete,class:"confirm"},{default:m((()=>[ge])),_:1},8,["loading","onClick"])])])),default:m((()=>[u("div",ae,[te,u("span",null,[ne,u("span",ie,D(e.state.multipleSelection.length),1),de,oe,se])])])),_:1},8,["modelValue"])],64)}]]))}}}));
