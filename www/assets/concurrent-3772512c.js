var r=Object.defineProperty;var h=(u,t,s)=>t in u?r(u,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):u[t]=s;var e=(u,t,s)=>(h(u,typeof t!="symbol"?t+"":t,s),s);class q{constructor(t){e(this,"concurrent");e(this,"totalRequests");e(this,"requestCount");e(this,"waitedRequests");e(this,"results");e(this,"query");this.concurrent=t.concurrent||4,this.requestCount=0,this.waitedRequests=[],this.results=[],this.totalRequests=t.total,this.query=t.requestFunc}request(t,s){this.requestCount>=this.concurrent?this.waitedRequests.push(t):(this.requestCount++,this.query(t).then(()=>{this.results.push({id:t,success:!0})}).catch(()=>{this.results.push({id:t,success:!1})}).finally(()=>{this.results.length===this.totalRequests&&s(this.results),this.requestCount--,this.waitedRequests.length>0&&this.request(this.waitedRequests.shift(),s)}))}}export{q as C};
