System.register(["../vendors/element-plus-legacy-e48d1ae3.js","./index-legacy.acc39ef9.js","./tip-legacy-d18ff986.js"],(function(e){"use strict";var a,t,i,n,o,r,l,c,s,d,u,p,g,v,f,h,m,y,b,I,C,V,N,S,P;return{setters:[function(e){a=e.d,t=e.r,i=e.i,n=e.S,o=e.w,r=e.o,l=e.E,c=e.m,s=e.q,d=e.y,u=e.G,p=e.N,g=e.F,v=e.A,f=e.z,h=e.t,m=e.x,y=e.I,b=e.C},function(e){I=e.r,C=e.U,V=e._,N=e.b,S=e.d},function(e){P=e._}],execute:function(){const k=a({setup(){const e=N(),a=S(),l=()=>{s.loading=!0;const{pageSize:e,currentPage:a}=y(s.pagination),{invoiceNumber:t}=y(s.searchParam);(function(e){return I.post(C.INVOICE.queryInvoice,e)})({BeginPostingDate:"",EndPostingDate:"",InvoiceNo:t,DeliverOrderId:"",HospitalCode:"",ProviderName:"",VerifyStatus:"1",ApproveStatus:"2",PageNo:a,RecordPerPage:e}).then((e=>{var a;s.pagination.total=e.TotalRecordCount,a=e.invoices,s.tableData=a.map((e=>{const{INVOICEDATE:a,INVOICECODE:t,INVOICEAMT:i,INVOICENO:n,VerifyStatus:o,ApproveStatus:r,VerifyDate:l,SODATE:c,ProviderName:s}=e;return{invoiceNumber:n,invoiceSerialNumber:t,invoiceMoney:i,verifyStatus:o?"已核销":"待核销",checkStatus:r?"已审批":"待审批",receiveTime:a.substr(0,10),accountTime:l.substr(0,10),invoiceCreateTime:c.substr(0,10),provider:s}}))})).finally((()=>{s.loading=!1}))},c=e=>{e&&(s.pagination.currentPage=1),l()},s=t({loading:!1,searchParam:{invoiceNumber:""},pagination:{currentPage:1,total:0,pageSize:30},headersConfig:[{label:"发票号",prop:"invoiceNumber"},{label:"发票编号",prop:"invoiceSerialNumber"},{label:"发票金额",prop:"invoiceMoney"},{label:"供应商",prop:"provider"},{label:"开票时间",prop:"invoiceCreateTime"},{label:"核销状态",prop:"verifyStatus"},{label:"审批状态",prop:"checkStatus"},{label:"数据接收时间",prop:"receiveTime"},{label:"账务日期",prop:"accountTime"}],tableData:[],dialogVerifyInvoice:!1,verifyInvoiceData:{invoiceId:""}}),d={calcHeaderWidth:i("calcHeaderMinWidth"),handlePaginationChange(){c(!1)},handleSearch(){c(!0)},handleCheck(e){s.dialogVerifyInvoice=!0,s.verifyInvoiceData.invoiceId=e.invoiceNumber},confirmVerifyInvoice(){(function(e){return I.post(C.INVOICE.checkInvoice,e)})({InvoiceNo:s.verifyInvoiceData.invoiceId}).then((()=>{n.success("操作成功"),s.dialogVerifyInvoice=!1})).finally((()=>{l()}))}};return o((()=>a.getters.settings),(()=>{s.headersConfig=a.getters.settings[e.name]||s.headersConfig})),r((()=>{l()})),{state:s,...d}}}),D=b("查询"),w=b("审批"),E=d("div",{class:"title"},"提示",-1),_={class:"tip-body"},O=d("img",{src:P,alt:""},null,-1),T=b("确认要审核发票号为"),z={class:"item-name"},x=b("的发票吗?"),A={class:"right-footer"},U=b("取消"),H=b("确定");e("default",V(k,[["render",function(e,a,t,i,n,o){const r=l("el-input"),y=l("el-button"),b=l("styled-search"),I=l("el-table-column"),C=l("styled-table"),V=l("styled-pagination"),N=l("el-dialog");return c(),s(g,null,[d(b,{"hide-search-more":""},{"styled-search-left":u((()=>[d(r,{modelValue:e.state.searchParam.invoiceNumber,"onUpdate:modelValue":a[1]||(a[1]=a=>e.state.searchParam.invoiceNumber=a),placeholder:"请输入发票号",clearable:"",onKeydown:p(e.handleSearch,["enter"]),onClear:e.handleSearch},null,8,["modelValue","onKeydown","onClear"]),d(y,{type:"primary",class:"search",onClick:e.handleSearch},{default:u((()=>[D])),_:1},8,["onClick"])])),_:1}),d(C,{data:e.state.tableData},{"table-columns":u((()=>[(c(!0),s(g,null,v(e.state.headersConfig,((a,t)=>(c(),s(I,{"show-overflow-tooltip":"",key:t,prop:a.prop,label:a.label,"min-width":e.calcHeaderWidth(a,t)},{header:u((e=>[d("span",null,f(e.column.label),1)])),default:u((e=>[d("span",null,f(e.row[a.prop]),1)])),_:2},1032,["prop","label","min-width"])))),128)),d(I,{label:"操作","min-width":100,fixed:"right"},{default:u((a=>[h(d(y,{class:"modify",type:"text",onClick:t=>e.handleCheck(a.row)},{default:u((()=>[w])),_:2},1032,["onClick"]),[[m,"待审批"===a.row.checkStatus]])])),_:1})])),_:1},8,["data"]),d(V,{total:e.state.pagination.total,"current-page":e.state.pagination.currentPage,"onUpdate:current-page":a[2]||(a[2]=a=>e.state.pagination.currentPage=a),"page-size":e.state.pagination.pageSize,"onUpdate:page-size":a[3]||(a[3]=a=>e.state.pagination.pageSize=a),onPaginationChange:e.handlePaginationChange},null,8,["total","current-page","page-size","onPaginationChange"]),d(N,{width:"466px",modelValue:e.state.dialogVerifyInvoice,"onUpdate:modelValue":a[5]||(a[5]=a=>e.state.dialogVerifyInvoice=a)},{title:u((()=>[E])),footer:u((()=>[d("div",A,[d(y,{onClick:a[4]||(a[4]=a=>e.state.dialogVerifyInvoice=!1),class:"cancel"},{default:u((()=>[U])),_:1}),d(y,{type:"primary",onClick:e.confirmVerifyInvoice,class:"confirm"},{default:u((()=>[H])),_:1},8,["onClick"])])])),default:u((()=>[d("div",_,[O,d("span",null,[T,d("span",z,f(e.state.verifyInvoiceData.invoiceId),1),x])])])),_:1},8,["modelValue"])],64)}]]))}}}));
