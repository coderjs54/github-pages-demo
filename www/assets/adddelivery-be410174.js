var S=Object.defineProperty;var F=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var O=(e,t,a)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,y=(e,t)=>{for(var a in t||(t={}))v.call(t,a)&&O(e,a,t[a]);if(F)for(var a of F(t))w.call(t,a)&&O(e,a,t[a]);return e};import{r as H,U as q,_ as P,u as U,b as V,O as W}from"./index.1a2bb961.js";import{d as G,i as B,r as L,I as X,O as Z,E as d,m as h,q as C,y as o,G as l,F as T,A as $,z as f,K as J,Y as Q,C as i}from"../vendors/element-plus-6f9977bb.js";import{C as Y}from"./concurrent-3772512c.js";import{u as b}from"./unique-bfe2af3c.js";import{_ as j}from"./tip-1b2ff95a.js";function K(e){return H.post(q.DELIVERY.addMiddleTableDelivery,e)}function z(e,t){const a=new Y({concurrent:5,total:e.length,requestFunc:K});for(let r=0;r<e.length;r++)a.request(e[r],t)}const x=G({setup(){const e=U(),t=V(),a=B("showPagination",!1),r={FROM_WHERE:"/orderlist"},n=L({showPagination:a,tableData:[],headersConfig:[{label:"\u5355\u636E\u53F7",prop:"DJH"},{label:"\u5BA1\u6838\u65E5\u671F",prop:"SHRQ"},{label:"\u8D44\u4EA7\u4EE3\u7801",prop:"ZCDM"},{label:"\u8D44\u4EA7\u540D\u79F0",prop:"ZCMC"},{label:"\u89C4\u683C\u578B\u53F7",prop:"GGXH"},{label:"\u5355\u4F4D",prop:"UNIT"},{label:"\u6570\u91CF",prop:"AMOUNT"},{label:"\u7533\u8BF7\u90E8\u95E8\u540D\u79F0",prop:"SQBMMC"},{label:"\u4F9B\u8D27\u5355\u4F4D\u540D\u79F0",prop:"GHDWMC"},{label:"\u8BB0\u5F55\u751F\u6210\u65E5\u671F",prop:"JLSCRQ"},{label:"\u5236\u5355\u4EBA\u540D\u79F0",prop:"ZDRMC"},{label:"\u5907\u6CE8",prop:"Remark"},{label:"\u4E70A\u6362B",prop:"buy_a_to_b"}],orderaddDialog:!1,orderadding:!1}),g={calcHeaderWidth:B("calcHeaderMinWidth"),handleOrderAdd(){n.orderaddDialog=!0},confirmOrderAdd(){const s=X(n.tableData);let p,_=[];const c=new Date,A=s.map((D,u)=>{const{UNIT:m,AMOUNT:E,DJH:M,ZCDM:R,ZCMC:N,PONO:k,PODETNO:I}=D;return p=b.uniqueSOID(c)+u,_.push(p),{INVDETID:b.uniqueINVDETID(c)+u,SOID:p,SOGRPNO:"1",SONO:M,SODATE:W(),PONO:k,PODETNO:I,DITEMCODE:R,DITEMNAME:N,DPACKUNIT:m,DQTY:E,DTAXPRC:"15000",TAXAMT:"1500",TAX:"15",LOTNO:b.uniqueLOTNO(c)+u,ENDDATE:"2022-09-30",TAXRATE:"0.2"}});z(A,D=>{n.orderaddDialog=!1,D.every(u=>u.success)&&(Q({title:"\u64CD\u4F5C\u6210\u529F",dangerouslyUseHTMLString:!0,message:"\u6B64\u6B21\u7CFB\u7EDF\u81EA\u52A8\u751F\u6210\u7684\u4EA4\u8D27\u5355id\u4E3A\uFF1A<strong style='color: darkorange;'>"+_.join(",")+"</strong>\uFF0C\u60A8\u53EF\u4EE5\u5728\u9A8C\u6536\u5217\u8868\u4E2D\u67E5\u770B\u3002",type:"success",duration:0}),e.push(r.FROM_WHERE))})},handleGoBack(){e.go(-1)}};return Z(()=>{let s=t.params.tableData;if(!s||(s=JSON.parse(s),!s.length))return e.push(r.FROM_WHERE);n.tableData=s}),y({state:n},g)}}),ee=i("\u786E\u5B9A\u4EA4\u8D27"),te=i("\u8FD4\u56DE\u9009\u62E9"),ae=o("div",{class:"title"},"\u63D0\u793A",-1),oe={class:"tip-body"},ue=o("img",{src:j,alt:""},null,-1),se=i("\u786E\u8BA4\u8981\u5BF9\u9009\u4E2D\u7684"),le={class:"item-name"},re=i("\u4E2A\u8BA2\u5355\u8FDB\u884C\u4EA4\u8D27\u5417?"),ne={class:"right-footer"},de=i("\u53D6\u6D88"),ie=i("\u786E\u5B9A");function pe(e,t,a,r,n,g){const s=d("el-button"),p=d("styled-search"),_=d("el-table-column"),c=d("styled-table"),A=d("styled-pagination"),D=d("el-dialog");return h(),C(T,null,[o(p,{"hide-search-more":""},{"styled-search-right":l(()=>[o(s,{type:"primary",class:"search",onClick:e.handleOrderAdd},{default:l(()=>[ee]),_:1},8,["onClick"]),o(s,{type:"primary",plain:"",onClick:e.handleGoBack},{default:l(()=>[te]),_:1},8,["onClick"])]),_:1}),o(c,{data:e.state.tableData},{"table-columns":l(()=>[(h(!0),C(T,null,$(e.state.headersConfig,(u,m)=>(h(),C(_,{"show-overflow-tooltip":"",key:m,prop:u.prop,label:u.label,"min-width":e.calcHeaderWidth(u,m)},{header:l(E=>[o("span",null,f(E.column.label),1)]),default:l(E=>[o("span",null,f(E.row[u.prop]),1)]),_:2},1032,["prop","label","min-width"]))),128))]),_:1},8,["data"]),e.state.showPagination?(h(),C(A,{key:0})):J("",!0),o(D,{width:"466px",modelValue:e.state.orderaddDialog,"onUpdate:modelValue":t[2]||(t[2]=u=>e.state.orderaddDialog=u)},{title:l(()=>[ae]),footer:l(()=>[o("div",ne,[o(s,{onClick:t[1]||(t[1]=u=>e.state.orderaddDialog=!1),class:"cancel"},{default:l(()=>[de]),_:1}),o(s,{type:"primary",loading:e.state.orderadding,onClick:e.confirmOrderAdd,class:"confirm"},{default:l(()=>[ie]),_:1},8,["loading","onClick"])])]),default:l(()=>[o("div",oe,[ue,o("span",null,[se,o("span",le,f(e.state.tableData.length),1),re])])]),_:1},8,["modelValue"])],64)}var Ce=P(x,[["render",pe]]);export{Ce as default};
