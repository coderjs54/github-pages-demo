var M=Object.defineProperty,A=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var y=(e,a,n)=>a in e?M(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,d=(e,a)=>{for(var n in a||(a={}))I.call(a,n)&&y(e,n,a[n]);if(_)for(var n of _(a))T.call(a,n)&&y(e,n,a[n]);return e},B=(e,a)=>A(e,H(a));import{r as z,U as N,_ as O,d as W,b as U}from"./index.1a2bb961.js";import{d as q,i as D,c as P,a as v,r as L,w as V,o as G,E as i,m as f,q as F,y as l,G as p,F as R,A as $,z as k,I as w,C as Q}from"../vendors/element-plus-6f9977bb.js";function J(e){return z.post(N.ORDER.queryOrder,e)}const Z=q({setup(){const e=W(),a=U(),n=D("setTableHeaders"),c=()=>{t.loading=!0;const{pageSize:o,currentPage:r}=w(t.pagination),{searchWord:s}=w(t.searchParam);J({search_word:s,IsHChemical:0,IsReceiveDeliverOrder:2,SendStatus:1,IsAccept:2,NeedPaging:!0,PageNum:r,RecordPerPage:o}).then(E=>{t.pagination.total=E.TotalRecordCount,S(E.AutoOrderInfo)}).finally(()=>{t.loading=!1})},S=o=>{t.tableData=o.map(r=>{const{material:s,autostore:u}=r;return B(d({},u),{brandName:t.brandIdMap[s.brand_id]})})},g=o=>{o&&(t.pagination.currentPage=1),c()},m=P(()=>t.headersConfig.filter(o=>!o.hidden)),h={remarkFormRef:v(null)},b={remarkFormRules:{remark:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BA2\u5355\u5907\u6CE8\u4FE1\u606F",trigger:"blur"}]}},t=L({loading:!1,searchParam:{searchWord:"",dateRange:"",diseaseType:""},pagination:{currentPage:1,total:0,pageSize:30},headersConfig:[{label:"\u5E8F\u53F7",prop:"id"},{label:"\u5355\u636E\u53F7",prop:"DJH"},{label:"\u5BA1\u6838\u65E5\u671F",prop:"SHRQ"},{label:"\u8D44\u4EA7\u540D\u79F0",prop:"ZCMC"},{label:"\u89C4\u683C\u578B\u53F7",prop:"GGXH"},{label:"\u54C1\u724C",prop:"brandName"},{label:"\u5355\u4F4D",prop:"UNIT"},{label:"\u6570\u91CF",prop:"AMOUNT"},{label:"\u7533\u8BF7\u90E8\u95E8\u540D\u79F0",prop:"SQBMMC"},{label:"\u4F9B\u8D27\u5355\u4F4D\u540D\u79F0",prop:"GHDWMC"},{label:"\u8BB0\u5F55\u751F\u6210\u65E5\u671F",prop:"JLSCRQ"},{label:"\u5236\u5355\u4EBA\u540D\u79F0",prop:"ZDRMC"},{label:"\u5907\u6CE8",prop:"Remark"},{label:"\u4E70A\u6362B",prop:"buy_a_to_b",hidden:!e.getters.buyAToB}],tableData:[],multipleSelection:[],brandIdMap:P(()=>e.getters.brandIdMap),uploadOrderDialog:!1,remarkForm:{remark:""},orderIds:[]}),C={handleSearch(){g(!0)},calcHeaderWidth:D("calcHeaderMinWidth"),handleClickSetting(){n(t.headersConfig,o=>{t.headersConfig=o})},handlePaginationChange(){g(!1)}};return V(()=>e.getters.settings,()=>{t.headersConfig=e.getters.settings[a.name]||t.headersConfig}),G(c),d(d(d({state:t,headersShown:m},C),b),h)}}),j=Q("\u67E5\u8BE2");function X(e,a,n,c,S,g){const m=i("el-input"),h=i("el-button"),b=i("styled-search"),t=i("el-table-column"),C=i("styled-table"),o=i("styled-pagination");return f(),F(R,null,[l(b,{"hide-search-more":""},{"styled-search-left":p(()=>[l(m,{modelValue:e.state.searchParam.searchWord,"onUpdate:modelValue":a[1]||(a[1]=r=>e.state.searchParam.searchWord=r),placeholder:"\u8BF7\u8F93\u5165\u67E5\u8BE2\u5173\u952E\u5B57",clearable:""},null,8,["modelValue"]),l(h,{type:"primary",class:"search",onClick:e.handleSearch},{default:p(()=>[j]),_:1},8,["onClick"])]),_:1}),l(C,{loading:e.state.loading,setting:"",data:e.state.tableData,onClickSetting:e.handleClickSetting},{"table-columns":p(()=>[(f(!0),F(R,null,$(e.headersShown,(r,s)=>(f(),F(t,{"show-overflow-tooltip":"",key:s,prop:r.prop,label:r.label,"min-width":e.calcHeaderWidth(r,s)},{header:p(u=>[l("span",null,k(u.column.label),1)]),default:p(u=>[l("span",null,k(u.row[r.prop]),1)]),_:2},1032,["prop","label","min-width"]))),128))]),_:1},8,["loading","data","onClickSetting"]),l(o,{total:e.state.pagination.total,"current-page":e.state.pagination.currentPage,"onUpdate:current-page":a[2]||(a[2]=r=>e.state.pagination.currentPage=r),"page-size":e.state.pagination.pageSize,"onUpdate:page-size":a[3]||(a[3]=r=>e.state.pagination.pageSize=r),onPaginationChange:e.handlePaginationChange},null,8,["total","current-page","page-size","onPaginationChange"])],64)}var ee=O(Z,[["render",X]]);export{ee as default};
