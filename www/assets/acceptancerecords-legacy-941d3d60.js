System.register(["../vendors/element-plus-legacy-e48d1ae3.js","./index-legacy.acc39ef9.js"],(function(e){"use strict";var a,l,r,t,n,o,d,i,s,p,c,h,u,g,m,b,D,C,P,I,S,y;return{setters:[function(e){a=e.d,l=e.i,r=e.r,t=e.c,n=e.w,o=e.o,d=e.E,i=e.m,s=e.q,p=e.y,c=e.G,h=e.N,u=e.F,g=e.A,m=e.z,b=e.I,D=e.C},function(e){C=e.r,P=e.U,I=e._,S=e.d,y=e.b}],execute:function(){const f=a({setup(){const e=S(),a=y(),d=l("exportXLSX"),i=l("exportPDF"),s=l("setTableHeaders"),p=()=>{h.loading=!0;const{pageSize:e,currentPage:a}=b(h.pagination),{dateRange:l,SOID:r,invoiceNumber:t,shortname:n,supplier:o}=b(h.searchParam),[d,i]=l||["",""];(function(e){return C.post(P.DELIVERY.queryMiddleTableDelivery,e)})({DeliverOrderId:r,SearchWord:n,RequestPurchaseBeginDate:d,RequestPurchaseEndDate:i,InvoiceNo:t,ProviderName:o,NeedCheckIsAccept:!0,IsAccept:!0,NeedCheckHChemical:!1,IsHChemical:!1,NeedPaging:!0,PageNumber:a,RecordPerPage:e}).then((e=>{h.pagination.total=e.TotalRecordCount,c(e.DeliverOrders)})).finally((()=>{h.loading=!1}))},c=e=>{h.tableData=e.map((e=>{const{InvoiceNo:a,material:l,deliverOrder:r}=e;return{...r,short_name:null==l?void 0:l.short_name,spec:null==l?void 0:l.spec,brandName:h.brandIdMap[null==l?void 0:l.brand_id],INVDETID:a,SODATE:r.SODATE.replace("T"," "),ENDDATE:r.ENDDATE.replace("T"," "),material_name:null==l?void 0:l.name,IsHazardousChemical:r.IsHazardousChemical?"是":"否"}}))},h=r({loading:!1,searchParam:{dateRange:"",SOID:"",invoiceNumber:"",shortname:"",supplier:""},pagination:{currentPage:1,total:0,pageSize:30},headersConfig:[{label:"序号",prop:"id"},{label:"交货单ID",prop:"SOID"},{label:"交货单号",prop:"SONO"},{label:"发票ID",prop:"INVDETID"},{label:"交货日期",prop:"SODATE"},{label:"采购单号",prop:"PONO"},{label:"物料名称",prop:"material_name"},{label:"物料简称",prop:"short_name"},{label:"物料规格",prop:"spec",width:90},{label:"品牌",prop:"brandName"},{label:"是否危险品",prop:"IsHazardousChemical"},{label:"采购单明细号",prop:"PODETNO"},{label:"院内码",prop:"DITEMCODE"},{label:"验收人",prop:"Accepter1UserName"},{label:"送货数量",prop:"DQTY"},{label:"单位",prop:"DPACKUNIT"},{label:"温度",prop:"ActualTemperature"},{label:"含税单价",prop:"DTAXPRC"},{label:"含税金额",prop:"TAXAMT"},{label:"批号",prop:"LOTNO"},{label:"效期",prop:"ENDDATE",width:160},{label:"发票税率",prop:"TAXRATE"},{label:"发票抬头",prop:"INVOICETITLE"},{label:"发票代码",prop:"INVOICECODE"},{label:"发票号码",prop:"INVOICENO"}],tableData:[],PDFHandling:!1,brandIdMap:t((()=>e.getters.brandIdMap))}),u=e=>{e&&(h.pagination.currentPage=1),p()},g=t((()=>h.headersConfig.filter((e=>!e.hidden)))),m={calcHeaderWidth:l("calcHeaderMinWidth"),handleClickSetting(){s(h.headersConfig,(e=>{h.headersConfig=e}))},handlePaginationChange(){u(!1)},handleSearch(){u(!0)},handleExportXLSX(){d(h.headersConfig,h.tableData,"验收记录","验收记录详情")},handleExportPDF(){h.PDFHandling=!0,i(h.headersConfig,h.tableData,"验收记录").finally((()=>{h.PDFHandling=!1}))}};return n((()=>e.getters.settings),(()=>{h.headersConfig=e.getters.settings[a.name]||h.headersConfig})),o((()=>{p()})),{state:h,...m,headersShown:g}}}),N={class:"date-box"},E=D("查询"),T=D("导出xlsx"),O=D("导出pdf"),V=D("上传证书"),v=D("打印标记"),w=D("查看导出记录");e("default",I(f,[["render",function(e,a,l,r,t,n){const o=d("el-date-picker"),b=d("el-input"),D=d("el-button"),C=d("styled-search"),P=d("el-table-column"),I=d("styled-table"),S=d("styled-pagination");return i(),s(u,null,[p(C,{"hide-search-more":""},{"styled-search-left":c((()=>[p("div",N,[p(o,{modelValue:e.state.searchParam.dateRange,"onUpdate:modelValue":a[1]||(a[1]=a=>e.state.searchParam.dateRange=a),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),p(b,{modelValue:e.state.searchParam.SOID,"onUpdate:modelValue":a[2]||(a[2]=a=>e.state.searchParam.SOID=a),placeholder:"请输入交货单号",clearable:"",onKeydown:h(e.handleSearch,["enter"]),onClear:e.handleSearch},null,8,["modelValue","onKeydown","onClear"]),p(b,{modelValue:e.state.searchParam.invoiceNumber,"onUpdate:modelValue":a[3]||(a[3]=a=>e.state.searchParam.invoiceNumber=a),placeholder:"请输入发票号",clearable:"",onKeydown:h(e.handleSearch,["enter"]),onClear:e.handleSearch},null,8,["modelValue","onKeydown","onClear"]),p(b,{modelValue:e.state.searchParam.shortname,"onUpdate:modelValue":a[4]||(a[4]=a=>e.state.searchParam.shortname=a),placeholder:"请输入物料名称、简称",clearable:"",onKeydown:h(e.handleSearch,["enter"]),onClear:e.handleSearch},null,8,["modelValue","onKeydown","onClear"]),p(b,{modelValue:e.state.searchParam.supplier,"onUpdate:modelValue":a[5]||(a[5]=a=>e.state.searchParam.supplier=a),placeholder:"请输入供应商名称",clearable:"",onKeydown:h(e.handleSearch,["enter"]),onClear:e.handleSearch},null,8,["modelValue","onKeydown","onClear"]),p(D,{type:"primary",class:"search",onClick:e.handleSearch},{default:c((()=>[E])),_:1},8,["onClick"])])),"styled-search-right":c((()=>[p(D,{type:"success",class:"export",disabled:0===e.state.tableData.length,onClick:e.handleExportXLSX},{default:c((()=>[T])),_:1},8,["disabled","onClick"]),p(D,{type:"success",class:"export",loading:e.state.PDFHandling,disabled:0===e.state.tableData.length,onClick:e.handleExportPDF},{default:c((()=>[O])),_:1},8,["loading","disabled","onClick"]),p(D,{type:"primary",class:"search"},{default:c((()=>[V])),_:1}),p(D,{type:"primary",class:"search"},{default:c((()=>[v])),_:1}),p(D,{type:"primary",class:"search"},{default:c((()=>[w])),_:1})])),_:1}),p(I,{loading:e.state.loading,setting:"",data:e.state.tableData,onClickSetting:e.handleClickSetting},{"table-columns":c((()=>[(i(!0),s(u,null,g(e.headersShown,((a,l)=>(i(),s(P,{"show-overflow-tooltip":"",key:l,prop:a.prop,label:a.label,"min-width":e.calcHeaderWidth(a,l)},{header:c((e=>[p("span",null,m(e.column.label),1)])),default:c((e=>[p("span",null,m(e.row[a.prop]),1)])),_:2},1032,["prop","label","min-width"])))),128))])),_:1},8,["loading","data","onClickSetting"]),p(S,{total:e.state.pagination.total,"current-page":e.state.pagination.currentPage,"onUpdate:current-page":a[6]||(a[6]=a=>e.state.pagination.currentPage=a),"page-size":e.state.pagination.pageSize,"onUpdate:page-size":a[7]||(a[7]=a=>e.state.pagination.pageSize=a),onPaginationChange:e.handlePaginationChange},null,8,["total","current-page","page-size","onPaginationChange"])],64)}]]))}}}));
