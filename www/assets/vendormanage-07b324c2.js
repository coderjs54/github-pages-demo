var j=Object.defineProperty;var $=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var N=(e,t,m)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:m}):e[t]=m,_=(e,t)=>{for(var m in t||(t={}))z.call(t,m)&&N(e,m,t[m]);if($)for(var m of $(t))G.call(t,m)&&N(e,m,t[m]);return e};import{d as J,i as O,a as W,r as P,c as L,I as A,S as v,o as Q,w as M,E as y,m as c,q as f,y as a,G as o,N as X,F as V,A as w,z as E,C as r}from"../vendors/element-plus-6f9977bb.js";import{r as U,U as k,_ as Y,d as Z}from"./index.1a2bb961.js";import{c as H}from"./index-77742ce3.js";import{r as x}from"./uploadrequest-d6966d22.js";import{C as ee}from"./concurrent-3772512c.js";import{_ as K}from"./tip-1b2ff95a.js";function le(e=""){return U.post(k.VENDOR.queryVendor,{search_word:e})}function ae(e){return U.post(k.VENDOR.addVendor,e)}function te(e){const t=new FormData;return t.set("MultipartFile",e),x.post(k.VENDOR.batchAddVendor,t,{headers:{"Content-Type":"multipart/form-data"}})}function oe(e){return U.post(k.VENDOR.modifyVendor,e)}function I(e){return U.post(k.VENDOR.deleteVendor,{id:e})}function ue(e,t){const m=new ee({concurrent:5,total:e.length,requestFunc:I});for(let h=0;h<e.length;h++)m.request(e[h],t)}const ne=J({setup(){const e=Z(),t=O("singleUpload"),m=O("downloadTemplate"),h=()=>{u.loading=!0;const n=u.searchVal;le(n).then(d=>{D(d.companies)}).finally(()=>{u.loading=!1})},S=(n,d)=>{const s=n.find(i=>String(i.value)===String(d));return s?s.label:""},q=(n,d)=>{const s=n.find(i=>String(i.label)===String(d));return s?s.value:""},D=n=>{u.tableData=n.map(d=>{let{id:s,name:i,type:F,contact:g,tele:b,invoice_type:l,memo:B,modify_time:C}=d;return{id:s,name:i,contact:g,telephone:b,remarks:B,updateTime:C.replace("T"," "),type:S(u.companyTypeOptions,F),invoiceType:S(u.invoiceTypeOptions,l)}})},p={styledUploadRef:W(null),singleAddFormRef:W(null),singleModifyFormRef:W(null)},R={labelWidth:"80px",singAddFormRules:{type:[{required:!0,message:"\u8BF7\u9009\u62E9\u5382\u5546\u7C7B\u578B",trigger:"change"}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u5382\u5546\u540D\u79F0",trigger:"blur"}],invoiceType:[{required:!0,message:"\u8BF7\u9009\u62E9\u53D1\u7968\u7C7B\u578B",trigger:"change"}],contact:[{required:!0,message:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA",trigger:"blur"}],telephone:[{required:!0,message:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",trigger:"blur"},{validator:H,trigger:"blur"}]},singleModifyFormRules:{type:[{required:!0,message:"\u8BF7\u9009\u62E9\u5382\u5546\u7C7B\u578B",trigger:"change"}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u5382\u5546\u540D\u79F0",trigger:"blur"}],invoiceType:[{required:!0,message:"\u8BF7\u9009\u62E9\u53D1\u7968\u7C7B\u578B",trigger:"change"}],contact:[{required:!0,message:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA",trigger:"blur"}],telephone:[{required:!0,message:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",trigger:"blur"},{validator:H,trigger:"blur"}]}},u=P({loading:!1,uploading:!1,companyTypeOptions:L(()=>e.getters.CompanyTypeOptions),invoiceTypeOptions:L(()=>e.getters.InvoiceTypeOptions),searchVal:"",tableData:[],headersConfig:[{label:"\u5E8F\u53F7",prop:"id"},{label:"\u5382\u5546\u540D\u79F0",prop:"name"},{label:"\u7C7B\u578B",prop:"type"},{label:"\u8054\u7CFB\u4EBA",prop:"contact"},{label:"\u8054\u7CFB\u7535\u8BDD",prop:"telephone"},{label:"\u53D1\u7968\u7C7B\u578B",prop:"invoiceType"},{label:"\u5907\u6CE8",prop:"remarks"},{label:"\u66F4\u65B0\u65F6\u95F4",prop:"updateTime"}],multipleSelection:[],singleAddDialog:!1,batchAddDialog:!1,singleDelDialog:!1,batchDelDialog:!1,singleModifyDialog:!1,singleAddForm:{type:"",name:"",invoiceType:"",contact:"",telephone:"",remarks:""},singleModifyForm:{id:"",type:"",name:"",invoiceType:"",contact:"",telephone:"",remarks:""},singleDelDialogData:{id:"",name:""},batchDelDialogData:[],batchDeleting:!1}),T={calcHeaderMinWidth:O("calcHeaderMinWidth"),handleChangeMultiple(n){u.multipleSelection=n},handleSearch(){h()},handleAdd(){u.singleAddDialog=!0},handleBatchAdd(){u.batchAddDialog=!0},handleModify(n){const{id:d,name:s,type:i,invoiceType:F,contact:g,telephone:b,remarks:l}=A(n);u.singleModifyForm={id:d,name:s,contact:g,telephone:b,remarks:l,type:q(u.companyTypeOptions,i),invoiceType:q(u.invoiceTypeOptions,F)},u.singleModifyDialog=!0},handleBatchDelete(){u.batchDelDialog=!0},handleSingleDelete(n){u.singleDelDialog=!0;const{id:d,name:s}=A(n);u.singleDelDialogData={id:d,name:s}},confirmSingleAdd(){p.singleAddFormRef.value.validate(n=>{if(!n)return;let{type:d,name:s,invoiceType:i,contact:F,telephone:g,remarks:b}=A(u.singleAddForm);ae({name:s,type:d,contact:F,invoice_type:i,tele:g,memo:b}).then(()=>{v.success("\u64CD\u4F5C\u6210\u529F"),h()}).finally(()=>{u.singleAddDialog=!1})})},handleDownloadTemplate(){m("Company")},handleUpload(n){u.uploading=!0,t(n,te).then(()=>{v.success("\u64CD\u4F5C\u6210\u529F"),h()}).finally(()=>{u.uploading=!1,u.batchAddDialog=!1})},confirmSingleDel(){const{id:n}=A(u.singleDelDialogData);I(String(n)).then(()=>{v.success("\u64CD\u4F5C\u6210\u529F"),h()}).finally(()=>{u.singleDelDialog=!1})},confirmBatchDelete(){const n=u.multipleSelection.map(d=>d.id);u.batchDeleting=!0,ue(n,d=>{u.batchDelDialog=!1;const s=d.filter(i=>i.success);s.length===n.length?v.success(`\u6210\u529F\u5220\u9664\u9009\u4E2D\u7684${s.length}\u4E2A\u5382\u5546`):v.error(`\u6210\u529F\u5220\u9664\u9009\u4E2D\u7684${s.length}\u4E2A\u5382\u5546\uFF0C\u6709${n.length-s.length}\u4E2A\u5220\u9664\u5931\u8D25`),h(),u.batchDeleting=!1})},confirmSingleModify(){p.singleModifyFormRef.value.validate(n=>{if(!n)return;const{id:d,name:s,type:i,invoiceType:F,contact:g,telephone:b,remarks:l}=A(u.singleModifyForm);oe({id:d,name:s,type:i,contact:g,invoice_type:F,tele:b,memo:l}).then(()=>{v.success("\u64CD\u4F5C\u6210\u529F"),h()}).finally(()=>{u.singleModifyDialog=!1})})}};return Q(()=>{h()}),M(()=>u.singleAddDialog,n=>{n||(u.singleAddForm={type:"",name:"",invoiceType:"",contact:"",telephone:"",remarks:""},p.singleAddFormRef.value.resetFields())}),M(()=>u.singleDelDialog,n=>{n||(u.singleDelDialogData={id:"",name:""})}),M(()=>u.singleModifyDialog,n=>{n||(u.singleModifyForm={id:"",type:"",name:"",invoiceType:"",contact:"",telephone:"",remarks:""})}),M(()=>u.batchAddDialog,n=>{n||p.styledUploadRef.value.clearFiles()}),_(_(_({state:u},p),T),R)}}),ie=r("\u67E5\u8BE2"),se=r("\u65B0\u589E"),de=r("\u6279\u91CF\u65B0\u589E"),re=r("\u5220\u9664\u9009\u62E9"),pe={key:1},me=r("\u7F16\u8F91"),ge=r("\u5220\u9664"),ce=a("div",{class:"title"},"\u65B0\u589E\u5382\u5546",-1),fe={class:"center-footer"},he=r("\u53D6\u6D88"),ye=r("\u786E\u8BA4"),De=a("div",{class:"title"},"\u7F16\u8F91\u5382\u5546",-1),Fe={class:"center-footer"},be=r("\u53D6\u6D88"),Be=r("\u786E\u8BA4"),Ce=a("div",{class:"title"},"\u6279\u91CF\u5BFC\u5165",-1),ve=a("div",{class:"title"},"\u63D0\u793A",-1),Ve={class:"tip-body"},Ae=a("img",{src:K,alt:""},null,-1),we=r("\u786E\u8BA4\u8981\u5C06\u540D\u4E3A"),Ee={class:"item-name"},ke=r("\u7684\u5382\u5546"),Te=a("span",{class:"highlight-text"},"\u5220\u9664",-1),_e=r("\u5417?"),Me={class:"right-footer"},Ue=r("\u53D6\u6D88"),Se=r("\u786E\u5B9A"),qe=a("div",{class:"title"},"\u63D0\u793A",-1),Re={class:"tip-body"},Oe=a("img",{src:K,alt:""},null,-1),We=r("\u786E\u8BA4\u8981\u5C06\u9009\u4E2D\u7684"),$e={class:"item-name"},Ne=r("\u4E2A\u5382\u5546"),Le=a("span",{class:"highlight-text"},"\u5220\u9664",-1),He=r("\u5417?"),Ke={class:"right-footer"},Ie=r("\u53D6\u6D88"),je=r("\u786E\u5B9A");function ze(e,t,m,h,S,q){const D=y("el-input"),p=y("el-button"),R=y("styled-search"),u=y("el-tag"),T=y("el-table-column"),n=y("styled-table"),d=y("el-option"),s=y("el-select"),i=y("el-form-item"),F=y("el-form"),g=y("el-dialog"),b=y("styled-upload");return c(),f(V,null,[a(R,{"hide-search-more":""},{"styled-search-left":o(()=>[a(D,{modelValue:e.state.searchVal,"onUpdate:modelValue":t[1]||(t[1]=l=>e.state.searchVal=l),placeholder:"\u8BF7\u8F93\u5165\u5382\u5546\u540D\u79F0",clearable:"",onKeydown:X(e.handleSearch,["enter"]),onClear:e.handleSearch},null,8,["modelValue","onKeydown","onClear"]),a(p,{type:"primary",class:"search",onClick:e.handleSearch},{default:o(()=>[ie]),_:1},8,["onClick"])]),"styled-search-right":o(()=>[a(p,{type:"success",icon:"el-icon-plus",class:"export",onClick:e.handleAdd},{default:o(()=>[se]),_:1},8,["onClick"]),a(p,{type:"success",class:"export",onClick:e.handleBatchAdd},{default:o(()=>[de]),_:1},8,["onClick"]),a(p,{type:"danger",disabled:e.state.multipleSelection.length===0,class:"delete",onClick:e.handleBatchDelete},{default:o(()=>[re]),_:1},8,["disabled","onClick"])]),_:1}),a(n,{loading:e.state.loading,multiple:"",data:e.state.tableData,onChangeMultiple:e.handleChangeMultiple},{"table-columns":o(()=>[(c(!0),f(V,null,w(e.state.headersConfig,(l,B)=>(c(),f(T,{"show-overflow-tooltip":"",key:B,prop:l.prop,label:l.label,"min-width":e.calcHeaderMinWidth(l,B)},{header:o(C=>[a("span",null,E(C.column.label),1)]),default:o(C=>[l.prop==="status"?(c(),f(u,{key:0,class:C.row.status?"normal":"withdraw"},{default:o(()=>[r(E(C.row.status?"\u542F\u7528":"\u505C\u7528"),1)]),_:2},1032,["class"])):(c(),f("span",pe,E(C.row[l.prop]),1))]),_:2},1032,["prop","label","min-width"]))),128)),a(T,{label:"\u64CD\u4F5C",fixed:"right"},{default:o(l=>[a(p,{type:"text",class:"modify",onClick:B=>e.handleModify(l.row)},{default:o(()=>[me]),_:2},1032,["onClick"]),a(p,{type:"text",class:"delete",onClick:B=>e.handleSingleDelete(l.row)},{default:o(()=>[ge]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["loading","data","onChangeMultiple"]),a(g,{width:"516px",modelValue:e.state.singleAddDialog,"onUpdate:modelValue":t[9]||(t[9]=l=>e.state.singleAddDialog=l)},{title:o(()=>[ce]),footer:o(()=>[a("div",fe,[a(p,{onClick:t[8]||(t[8]=l=>e.state.singleAddDialog=!1),class:"cancel"},{default:o(()=>[he]),_:1}),a(p,{type:"primary",onClick:e.confirmSingleAdd,class:"confirm"},{default:o(()=>[ye]),_:1},8,["onClick"])])]),default:o(()=>[a(F,{model:e.state.singleAddForm,rules:e.singAddFormRules,ref:"singleAddFormRef"},{default:o(()=>[a(i,{label:"\u7C7B\u578B","label-width":e.labelWidth,prop:"type"},{default:o(()=>[a(s,{modelValue:e.state.singleAddForm.type,"onUpdate:modelValue":t[2]||(t[2]=l=>e.state.singleAddForm.type=l),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",clearable:""},{default:o(()=>[(c(!0),f(V,null,w(e.state.companyTypeOptions,l=>(c(),f(d,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"\u5382\u5546\u540D\u79F0","label-width":e.labelWidth,prop:"name"},{default:o(()=>[a(D,{modelValue:e.state.singleAddForm.name,"onUpdate:modelValue":t[3]||(t[3]=l=>e.state.singleAddForm.name=l),placeholder:"\u8BF7\u8F93\u5165\u5382\u5546\u540D\u79F0",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"\u53D1\u7968\u7C7B\u578B","label-width":e.labelWidth,prop:"invoiceType"},{default:o(()=>[a(s,{modelValue:e.state.singleAddForm.invoiceType,"onUpdate:modelValue":t[4]||(t[4]=l=>e.state.singleAddForm.invoiceType=l),placeholder:"\u8BF7\u9009\u62E9\u53D1\u7968\u7C7B\u578B",clearable:""},{default:o(()=>[(c(!0),f(V,null,w(e.state.invoiceTypeOptions,l=>(c(),f(d,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"\u8054\u7CFB\u4EBA","label-width":e.labelWidth,prop:"contact"},{default:o(()=>[a(D,{modelValue:e.state.singleAddForm.contact,"onUpdate:modelValue":t[5]||(t[5]=l=>e.state.singleAddForm.contact=l),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"\u8054\u7CFB\u7535\u8BDD","label-width":e.labelWidth,prop:"telephone"},{default:o(()=>[a(D,{modelValue:e.state.singleAddForm.telephone,"onUpdate:modelValue":t[6]||(t[6]=l=>e.state.singleAddForm.telephone=l),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"\u5907\u6CE8","label-width":e.labelWidth},{default:o(()=>[a(D,{modelValue:e.state.singleAddForm.remarks,"onUpdate:modelValue":t[7]||(t[7]=l=>e.state.singleAddForm.remarks=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),a(g,{width:"516px",modelValue:e.state.singleModifyDialog,"onUpdate:modelValue":t[17]||(t[17]=l=>e.state.singleModifyDialog=l)},{title:o(()=>[De]),footer:o(()=>[a("div",Fe,[a(p,{onClick:t[16]||(t[16]=l=>e.state.singleModifyDialog=!1),class:"cancel"},{default:o(()=>[be]),_:1}),a(p,{type:"primary",onClick:e.confirmSingleModify,class:"confirm"},{default:o(()=>[Be]),_:1},8,["onClick"])])]),default:o(()=>[a(F,{model:e.state.singleModifyForm,rules:e.singleModifyFormRules,ref:"singleModifyFormRef"},{default:o(()=>[a(i,{label:"\u7C7B\u578B","label-width":e.labelWidth,prop:"type"},{default:o(()=>[a(s,{modelValue:e.state.singleModifyForm.type,"onUpdate:modelValue":t[10]||(t[10]=l=>e.state.singleModifyForm.type=l),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",clearable:""},{default:o(()=>[(c(!0),f(V,null,w(e.state.companyTypeOptions,l=>(c(),f(d,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"\u5382\u5546\u540D\u79F0","label-width":e.labelWidth,prop:"name"},{default:o(()=>[a(D,{modelValue:e.state.singleModifyForm.name,"onUpdate:modelValue":t[11]||(t[11]=l=>e.state.singleModifyForm.name=l),placeholder:"\u8BF7\u8F93\u5165\u5382\u5546\u540D\u79F0",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"\u53D1\u7968\u7C7B\u578B","label-width":e.labelWidth,prop:"invoiceType"},{default:o(()=>[a(s,{modelValue:e.state.singleModifyForm.invoiceType,"onUpdate:modelValue":t[12]||(t[12]=l=>e.state.singleModifyForm.invoiceType=l),placeholder:"\u8BF7\u9009\u62E9\u53D1\u7968\u7C7B\u578B",clearable:""},{default:o(()=>[(c(!0),f(V,null,w(e.state.invoiceTypeOptions,l=>(c(),f(d,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"\u8054\u7CFB\u4EBA","label-width":e.labelWidth,prop:"contact"},{default:o(()=>[a(D,{modelValue:e.state.singleModifyForm.contact,"onUpdate:modelValue":t[13]||(t[13]=l=>e.state.singleModifyForm.contact=l),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"\u8054\u7CFB\u7535\u8BDD","label-width":e.labelWidth,prop:"telephone"},{default:o(()=>[a(D,{modelValue:e.state.singleModifyForm.telephone,"onUpdate:modelValue":t[14]||(t[14]=l=>e.state.singleModifyForm.telephone=l),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"]),a(i,{label:"\u5907\u6CE8","label-width":e.labelWidth},{default:o(()=>[a(D,{modelValue:e.state.singleModifyForm.remarks,"onUpdate:modelValue":t[15]||(t[15]=l=>e.state.singleModifyForm.remarks=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),a(g,{width:"620px","custom-class":"upload",modelValue:e.state.batchAddDialog,"onUpdate:modelValue":t[18]||(t[18]=l=>e.state.batchAddDialog=l)},{title:o(()=>[Ce]),default:o(()=>[a(b,{ref:"styledUploadRef",uploading:e.state.uploading,"upload-label":"\u5BFC\u5165\u5382\u5546","download-label":"\u4E0B\u8F7D\u5382\u5546\u6A21\u7248",onUploadFile:e.handleUpload,onDownloadTemplate:e.handleDownloadTemplate},null,8,["uploading","onUploadFile","onDownloadTemplate"])]),_:1},8,["modelValue"]),a(g,{width:"466px",modelValue:e.state.singleDelDialog,"onUpdate:modelValue":t[20]||(t[20]=l=>e.state.singleDelDialog=l)},{title:o(()=>[ve]),footer:o(()=>[a("div",Me,[a(p,{onClick:t[19]||(t[19]=l=>e.state.singleDelDialog=!1),class:"cancel"},{default:o(()=>[Ue]),_:1}),a(p,{type:"primary",onClick:e.confirmSingleDel,class:"confirm"},{default:o(()=>[Se]),_:1},8,["onClick"])])]),default:o(()=>[a("div",Ve,[Ae,a("span",null,[we,a("span",Ee,E(e.state.singleDelDialogData.name),1),ke,Te,_e])])]),_:1},8,["modelValue"]),a(g,{width:"466px",modelValue:e.state.batchDelDialog,"onUpdate:modelValue":t[22]||(t[22]=l=>e.state.batchDelDialog=l)},{title:o(()=>[qe]),footer:o(()=>[a("div",Ke,[a(p,{onClick:t[21]||(t[21]=l=>e.state.batchDelDialog=!1),class:"cancel"},{default:o(()=>[Ie]),_:1}),a(p,{type:"primary",loading:e.state.batchDeleting,onClick:e.confirmBatchDelete,class:"confirm"},{default:o(()=>[je]),_:1},8,["loading","onClick"])])]),default:o(()=>[a("div",Re,[Oe,a("span",null,[We,a("span",$e,E(e.state.multipleSelection.length),1),Ne,Le,He])])]),_:1},8,["modelValue"])],64)}var xe=Y(ne,[["render",ze]]);export{xe as default};
