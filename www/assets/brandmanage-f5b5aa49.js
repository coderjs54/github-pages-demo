var L=Object.defineProperty;var U=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var q=(e,a,i)=>a in e?L(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i,y=(e,a)=>{for(var i in a||(a={}))H.call(a,i)&&q(e,i,a[i]);if(U)for(var i of U(a))K.call(a,i)&&q(e,i,a[i]);return e};import{d as j,i as V,a as k,r as z,I as C,S as h,o as G,w as b,E as c,m as v,q as R,y as l,G as t,N as I,F as $,A as J,z as A,C as d}from"../vendors/element-plus-6f9977bb.js";import{r as M,U as F,_ as O}from"./index.1a2bb961.js";import{r as P}from"./uploadrequest-d6966d22.js";import{C as Q}from"./concurrent-3772512c.js";import{u as B}from"./index-45a1f8f7.js";import{_ as N}from"./tip-1b2ff95a.js";function X(e=""){return M.post(F.BRAND.queryBrand,{search_word:e})}function Y(e){return M.post(F.BRAND.addBrand,{name:e})}function Z(e){const a=new FormData;return a.set("MultipartFile",e),P.post(F.BRAND.batchAddBrand,a,{headers:{"Content-Type":"multipart/form-data"}})}function x(e){return M.post(F.BRAND.modifyBrand,e)}function T(e){return M.post(F.BRAND.deleteBrand,{id:e})}function ee(e,a){const i=new Q({concurrent:5,total:e.length,requestFunc:T});for(let g=0;g<e.length;g++)i.request(e[g],a)}const le=j({setup(){const e=V("singleUpload"),a=V("downloadTemplate"),i=()=>{o.loading=!0;const n=o.searchVal;X(n).then(u=>{g(u.brands)}).finally(()=>{o.loading=!1})},g=n=>{o.tableData=n.map(u=>{let{id:m,name:p}=u;return{id:m,brandNumber:"\u8FD9\u662F\u54C1\u724C\u7F16\u53F7",brandName:p}})},f={styledUploadRef:k(null),singleAddFormRef:k(null),singleModifyFormRef:k(null)},E={labelWidth:"80px",singAddFormRules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u54C1\u724C\u540D\u79F0",trigger:"blur"}]},singleModifyFormRules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u54C1\u724C\u540D\u79F0",trigger:"blur"}]}},o=z({loading:!1,uploading:!1,searchVal:"",tableData:[],headersConfig:[{label:"\u5E8F\u53F7",prop:"id"},{label:"\u54C1\u724C",prop:"brandName"}],multipleSelection:[],singleAddDialog:!1,batchAddDialog:!1,singleDelDialog:!1,batchDelDialog:!1,singleModifyDialog:!1,singleAddForm:{name:""},singleModifyForm:{id:"",name:""},singleDelDialogData:{id:"",name:""},batchDelDialogData:[],batchDeleting:!1}),r={calcHeaderMinWidth:V("calcHeaderMinWidth"),handleChangeMultiple(n){o.multipleSelection=n},handleSearch(){i()},handleAdd(){o.singleAddDialog=!0},handleBatchAdd(){o.batchAddDialog=!0},handleModify(n){o.singleModifyDialog=!0;const{id:u,brandName:m}=C(n);o.singleModifyForm={id:u,name:m}},handleBatchDelete(){o.batchDelDialog=!0},confirmBatchDelete(){const n=o.multipleSelection.map(u=>u.id);o.batchDeleting=!0,ee(n,u=>{o.batchDelDialog=!1;const m=u.filter(p=>p.success);m.length===n.length?h.success(`\u6210\u529F\u5220\u9664\u9009\u4E2D\u7684${m.length}\u4E2A\u54C1\u724C`):h.error(`\u6210\u529F\u5220\u9664\u9009\u4E2D\u7684${m.length}\u4E2A\u54C1\u724C\uFF0C\u6709${n.length-m.length}\u4E2A\u5220\u9664\u5931\u8D25`),i(),o.batchDeleting=!1})},handleSingleDelete(n){o.singleDelDialog=!0;const{id:u,brandName:m}=C(n);o.singleDelDialogData={id:u,name:m}},confirmSingleAdd(){f.singleAddFormRef.value.validate(n=>{if(!n)return;let{name:u}=C(o.singleAddForm);Y(u).then(()=>{h.success("\u64CD\u4F5C\u6210\u529F"),i(),B()}).finally(()=>{o.singleAddDialog=!1})})},handleDownloadTemplate(){a("Brand")},handleUpload(n){o.uploading=!0,e(n,Z).then(()=>{h.success("\u64CD\u4F5C\u6210\u529F"),i(),B()}).finally(()=>{o.uploading=!1,o.batchAddDialog=!1})},confirmSingleDel(){const{id:n}=C(o.singleDelDialogData);T(String(n)).then(()=>{h.success("\u64CD\u4F5C\u6210\u529F"),i(),B()}).finally(()=>{o.singleDelDialog=!1})},confirmSingleModify(){f.singleModifyFormRef.value.validate(n=>{if(!n)return;const{id:u,name:m}=C(o.singleModifyForm);x({id:u,name:m}).then(()=>{h.success("\u64CD\u4F5C\u6210\u529F"),i(),B()}).finally(()=>{o.singleModifyDialog=!1})})}};return G(()=>{i()}),b(()=>o.singleAddDialog,n=>{n||(o.singleAddForm={name:""},f.singleAddFormRef.value.resetFields())}),b(()=>o.singleDelDialog,n=>{n||(o.singleDelDialogData={id:"",name:""})}),b(()=>o.singleModifyDialog,n=>{n||(o.singleModifyForm={id:"",name:""})}),b(()=>o.batchAddDialog,n=>{n||f.styledUploadRef.value.clearFiles()}),y(y(y({state:o},f),r),E)}}),ae=d("\u67E5\u8BE2"),te=d("\u65B0\u589E"),oe=d("\u6279\u91CF\u65B0\u589E"),ne=d("\u5220\u9664\u9009\u62E9"),se=d("\u7F16\u8F91"),ie=d("\u5220\u9664"),de=l("div",{class:"title"},"\u65B0\u589E\u54C1\u724C",-1),ue={class:"center-footer"},re=d("\u53D6\u6D88"),me=d("\u786E\u8BA4"),ce=l("div",{class:"title"},"\u7F16\u8F91\u54C1\u724C",-1),ge={class:"center-footer"},fe=d("\u53D6\u6D88"),pe=d("\u786E\u8BA4"),he=l("div",{class:"title"},"\u6279\u91CF\u5BFC\u5165",-1),De=l("div",{class:"title"},"\u63D0\u793A",-1),Ce={class:"tip-body"},Fe=l("img",{src:N,alt:""},null,-1),_e=d("\u786E\u8BA4\u8981\u5C06\u540D\u4E3A"),ye={class:"item-name"},be=d("\u7684\u54C1\u724C"),Ae=l("span",{class:"highlight-text"},"\u5220\u9664",-1),Be=d("\u5417?"),Me={class:"right-footer"},we=d("\u53D6\u6D88"),Ve=d("\u786E\u5B9A"),ke=l("div",{class:"title"},"\u63D0\u793A",-1),ve={class:"tip-body"},Re=l("img",{src:N,alt:""},null,-1),Ee=d("\u786E\u8BA4\u8981\u5C06\u6240\u9009\u4E2D\u7684"),Se={class:"item-name"},Ue=d("\u4E2A\u54C1\u724C"),qe=l("span",{class:"highlight-text"},"\u5220\u9664",-1),$e=d("\u5417?"),Ne={class:"right-footer"},Te=d("\u53D6\u6D88"),We=d("\u786E\u5B9A");function Le(e,a,i,g,f,E){const o=c("el-input"),r=c("el-button"),n=c("styled-search"),u=c("el-table-column"),m=c("styled-table"),p=c("el-form-item"),S=c("el-form"),D=c("el-dialog"),W=c("styled-upload");return v(),R($,null,[l(n,{"hide-search-more":""},{"styled-search-left":t(()=>[l(o,{modelValue:e.state.searchVal,"onUpdate:modelValue":a[1]||(a[1]=s=>e.state.searchVal=s),placeholder:"\u8BF7\u8F93\u5165\u54C1\u724C\u540D\u79F0",clearable:"",onKeydown:I(e.handleSearch,["enter"]),onClear:e.handleSearch},null,8,["modelValue","onKeydown","onClear"]),l(r,{type:"primary",class:"search",onClick:e.handleSearch},{default:t(()=>[ae]),_:1},8,["onClick"])]),"styled-search-right":t(()=>[l(r,{type:"success",icon:"el-icon-plus",class:"export",onClick:e.handleAdd},{default:t(()=>[te]),_:1},8,["onClick"]),l(r,{type:"success",class:"export",onClick:e.handleBatchAdd},{default:t(()=>[oe]),_:1},8,["onClick"]),l(r,{type:"danger",disabled:e.state.multipleSelection.length===0,class:"delete",onClick:e.handleBatchDelete},{default:t(()=>[ne]),_:1},8,["disabled","onClick"])]),_:1}),l(m,{loading:e.state.loading,multiple:"",data:e.state.tableData,onChangeMultiple:e.handleChangeMultiple},{"table-columns":t(()=>[(v(!0),R($,null,J(e.state.headersConfig,(s,_)=>(v(),R(u,{"show-overflow-tooltip":"",key:_,prop:s.prop,label:s.label,"min-width":e.calcHeaderMinWidth(s,_)},{header:t(w=>[l("span",null,A(w.column.label),1)]),default:t(w=>[l("span",null,A(w.row[s.prop]),1)]),_:2},1032,["prop","label","min-width"]))),128)),l(u,{label:"\u64CD\u4F5C",fixed:"right"},{default:t(s=>[l(r,{type:"text",class:"modify",onClick:_=>e.handleModify(s.row)},{default:t(()=>[se]),_:2},1032,["onClick"]),l(r,{type:"text",class:"delete",onClick:_=>e.handleSingleDelete(s.row)},{default:t(()=>[ie]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["loading","data","onChangeMultiple"]),l(D,{width:"516px",modelValue:e.state.singleAddDialog,"onUpdate:modelValue":a[4]||(a[4]=s=>e.state.singleAddDialog=s)},{title:t(()=>[de]),footer:t(()=>[l("div",ue,[l(r,{onClick:a[3]||(a[3]=s=>e.state.singleAddDialog=!1),class:"cancel"},{default:t(()=>[re]),_:1}),l(r,{type:"primary",onClick:e.confirmSingleAdd,class:"confirm"},{default:t(()=>[me]),_:1},8,["onClick"])])]),default:t(()=>[l(S,{model:e.state.singleAddForm,rules:e.singAddFormRules,ref:"singleAddFormRef"},{default:t(()=>[l(p,{label:"\u54C1\u724C\u540D\u79F0","label-width":e.labelWidth,prop:"name"},{default:t(()=>[l(o,{modelValue:e.state.singleAddForm.name,"onUpdate:modelValue":a[2]||(a[2]=s=>e.state.singleAddForm.name=s),placeholder:"\u8BF7\u8F93\u5165\u54C1\u724C\u540D\u79F0",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),l(D,{width:"516px",modelValue:e.state.singleModifyDialog,"onUpdate:modelValue":a[7]||(a[7]=s=>e.state.singleModifyDialog=s)},{title:t(()=>[ce]),footer:t(()=>[l("div",ge,[l(r,{onClick:a[6]||(a[6]=s=>e.state.singleModifyDialog=!1),class:"cancel"},{default:t(()=>[fe]),_:1}),l(r,{type:"primary",onClick:e.confirmSingleModify,class:"confirm"},{default:t(()=>[pe]),_:1},8,["onClick"])])]),default:t(()=>[l(S,{model:e.state.singleModifyForm,rules:e.singleModifyFormRules,ref:"singleModifyFormRef"},{default:t(()=>[l(p,{label:"\u54C1\u724C\u540D\u79F0","label-width":e.labelWidth,prop:"name"},{default:t(()=>[l(o,{modelValue:e.state.singleModifyForm.name,"onUpdate:modelValue":a[5]||(a[5]=s=>e.state.singleModifyForm.name=s),placeholder:"\u8BF7\u8F93\u5165\u54C1\u724C\u540D\u79F0",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),l(D,{width:"620px","custom-class":"upload",modelValue:e.state.batchAddDialog,"onUpdate:modelValue":a[8]||(a[8]=s=>e.state.batchAddDialog=s)},{title:t(()=>[he]),default:t(()=>[l(W,{ref:"styledUploadRef",uploading:e.state.uploading,"upload-label":"\u5BFC\u5165\u54C1\u724C","download-label":"\u4E0B\u8F7D\u7269\u6599\u54C1\u724C\u6A21\u7248",onUploadFile:e.handleUpload,onDownloadTemplate:e.handleDownloadTemplate},null,8,["uploading","onUploadFile","onDownloadTemplate"])]),_:1},8,["modelValue"]),l(D,{width:"466px",modelValue:e.state.singleDelDialog,"onUpdate:modelValue":a[10]||(a[10]=s=>e.state.singleDelDialog=s)},{title:t(()=>[De]),footer:t(()=>[l("div",Me,[l(r,{onClick:a[9]||(a[9]=s=>e.state.singleDelDialog=!1),class:"cancel"},{default:t(()=>[we]),_:1}),l(r,{type:"primary",onClick:e.confirmSingleDel,class:"confirm"},{default:t(()=>[Ve]),_:1},8,["onClick"])])]),default:t(()=>[l("div",Ce,[Fe,l("span",null,[_e,l("span",ye,A(e.state.singleDelDialogData.name),1),be,Ae,Be])])]),_:1},8,["modelValue"]),l(D,{width:"466px",modelValue:e.state.batchDelDialog,"onUpdate:modelValue":a[12]||(a[12]=s=>e.state.batchDelDialog=s)},{title:t(()=>[ke]),footer:t(()=>[l("div",Ne,[l(r,{onClick:a[11]||(a[11]=s=>e.state.batchDelDialog=!1),class:"cancel"},{default:t(()=>[Te]),_:1}),l(r,{type:"primary",loading:e.state.batchDeleting,onClick:e.confirmBatchDelete,class:"confirm"},{default:t(()=>[We]),_:1},8,["loading","onClick"])])]),default:t(()=>[l("div",ve,[Re,l("span",null,[Ee,l("span",Se,A(e.state.multipleSelection.length),1),Ue,qe,$e])])]),_:1},8,["modelValue"])],64)}var Oe=O(le,[["render",Le]]);export{Oe as default};
